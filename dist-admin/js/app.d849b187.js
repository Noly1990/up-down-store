(function(e){function t(t){for(var n,o,i=t[0],l=t[1],c=t[2],u=0,p=[];u<i.length;u++)o=i[u],s[o]&&p.push(s[o][0]),s[o]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);d&&d(t);while(p.length)p.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],n=!0,i=1;i<a.length;i++){var l=a[i];0!==s[l]&&(n=!1)}n&&(r.splice(t--,1),e=o(o.s=a[0]))}return e}var n={},s={app:0},r=[];function o(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=n,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(a,n,function(t){return e[t]}.bind(null,n));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var d=l;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"0471":function(e,t,a){},"0a5f":function(e,t,a){},1285:function(e,t,a){"use strict";var n=a("7bd8"),s=a.n(n);s.a},"1a1e":function(e,t,a){},"1b16":function(e,t,a){"use strict";var n=a("3b31"),s=a.n(n);s.a},"2d14":function(e,t,a){},3041:function(e,t,a){},"330f":function(e,t,a){},"3b31":function(e,t,a){},"3b44":function(e,t,a){"use strict";var n=a("9e4e"),s=a.n(n);s.a},"53e7":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("097d");var n=a("2b0e"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},r=[],o=(a("7c55"),a("2877")),i={},l=Object(o["a"])(i,s,r,!1,null,null,null);l.options.__file="App.vue";var c=l.exports,d=a("8c4f"),u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-box"},[a("h1",{staticClass:"login-title"},[e._v("河南师范大学安全培训考试管理系统")]),a("Card",{staticClass:"login-box"},[a("h3",[e._v("登录")]),a("div",{staticClass:"form-box",staticStyle:{"text-align":"center"}},[a("Form",{ref:"formInline",attrs:{model:e.formInline,rules:e.ruleInline}},[a("FormItem",{attrs:{prop:"user"}},[a("Input",{attrs:{type:"text",placeholder:"用户名"},model:{value:e.formInline.user,callback:function(t){e.$set(e.formInline,"user",t)},expression:"formInline.user"}},[a("Icon",{attrs:{slot:"prepend",type:"ios-person-outline"},slot:"prepend"})],1)],1),a("FormItem",{attrs:{prop:"password"}},[a("Input",{attrs:{type:"password",placeholder:"密码"},model:{value:e.formInline.password,callback:function(t){e.$set(e.formInline,"password",t)},expression:"formInline.password"}},[a("Icon",{attrs:{slot:"prepend",type:"ios-lock-outline"},slot:"prepend"})],1)],1),a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:function(t){e.handleSubmit("formInline")}}},[e._v("登陆")]),a("Button",{staticStyle:{"margin-left":"40px"},attrs:{type:"warning"},on:{click:function(t){e.handleSubmit("formInline")}}},[e._v("重置")])],1)],1)],1)])],1)},p=[],h=(a("7f7f"),{data:function(){return{formInline:{user:"",password:""},ruleInline:{user:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{type:"string",min:6,message:"密码至少6位",trigger:"blur"}]}}},components:{},methods:{handleSubmit:function(e){var t=this;this.$refs[e].validate(function(e){e?t.$http.post("/admin/login",{userName:t.formInline.user,password:t.formInline.password}).then(function(e){if(console.log("admin login",e.data),200==e.data.status){var a=e.data.data,n={userName:a.userName,userType:a.userType};t.$Message.success("登陆成功!"),t.$store.dispatch("UserLogin",n),t.$router.push("/index/")}else t.$Message.error("用户名或密码错误")}):t.$Message.error("请正确输入")})}}}),f=h,m=(a("ea63"),Object(o["a"])(f,u,p,!1,null,"0e18532a",null));m.options.__file="Login.vue";var g=m.exports,v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Layout",[a("div",{staticClass:"subpage-box"},[a("router-view")],1)])},y=[],b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"layout"},[a("Layout",[a("Header",{staticClass:"layout-header"},[a("Menu",{attrs:{mode:"horizontal",theme:"primary","active-name":"1"}},[a("div",{staticClass:"layout-logo"},[e._v("考试管理系统")]),a("div",{staticClass:"layout-nav"},["1"===e.userType?a("MenuItem",{attrs:{name:"1",to:"/index/examsetting"}},[a("Icon",{attrs:{type:"md-book"}}),e._v("\n                            考试设置\n                        ")],1):e._e(),"1"===e.userType?a("MenuItem",{attrs:{name:"2",to:"/index/quesmana"}},[a("Icon",{attrs:{type:"md-copy"}}),e._v("\n                            试题管理\n                        ")],1):e._e(),a("MenuItem",{attrs:{name:"3",to:"/index/stumana"}},[a("Icon",{attrs:{type:"ios-people"}}),e._v("\n                            学生管理\n                        ")],1),a("MenuItem",{attrs:{name:"4",to:"/index/updown"}},[a("Icon",{attrs:{type:"md-cloud-download"}}),e._v("\n                            上传下载\n                        ")],1)],1),a("Button",{attrs:{size:"small",type:"error"},on:{click:e.loginOut}},[e._v("登出")])],1)],1),a("Layout",{style:{padding:"0 50px"}},[a("Content",{style:{padding:"24px 0",minHeight:"280px",background:"#fff"}},[a("Layout",[a("Sider",{style:{background:"#fff"},attrs:{"hide-trigger":""}},[a("Menu",{attrs:{"active-name":e.activeItem,theme:"light",width:"auto","open-names":["0"],accordion:""}},["1"===e.userType?a("Submenu",{attrs:{name:"0"}},[a("template",{slot:"title"},[a("Icon",{attrs:{type:"ios-navigate"}}),e._v("\n                                        信息总览\n                                    ")],1),a("MenuItem",{attrs:{name:"0-1",to:"/index/"}},[e._v("总览")])],2):e._e(),"1"===e.userType?a("Submenu",{attrs:{name:"1"}},[a("template",{slot:"title"},[a("Icon",{attrs:{type:"md-book"}}),e._v("\n                                        考试相关\n                                    ")],1),a("MenuItem",{attrs:{name:"1-2",to:"/index/examsetting"}},[e._v("考试设置")])],2):e._e(),a("Submenu",{attrs:{name:"2"}},[a("template",{slot:"title"},[a("Icon",{attrs:{type:"ios-people"}}),e._v("\n                                        学生相关\n                                    ")],1),a("MenuItem",{attrs:{name:"2-1",to:"/index/stumana"}},[e._v("学生管理")]),a("MenuItem",{attrs:{name:"2-2",to:"/index/scoresearch"}},[e._v("成绩查询")])],2),"1"===e.userType?a("Submenu",{attrs:{name:"3"}},[a("template",{slot:"title"},[a("Icon",{attrs:{type:"md-copy"}}),e._v("\n                                        试题相关\n                                    ")],1),a("MenuItem",{attrs:{name:"3-1",to:"/index/quesmana"}},[e._v("试题管理")]),a("MenuItem",{attrs:{name:"3-2",to:"/index/quescate"}},[e._v("分类管理")])],2):e._e(),"1"===e.userType?a("Submenu",{attrs:{name:"4"}},[a("template",{slot:"title"},[a("Icon",{attrs:{type:"md-albums"}}),e._v("\n                                        规章相关\n                                    ")],1),a("MenuItem",{attrs:{name:"4-1",to:"/index/regumana"}},[e._v("规章管理")])],2):e._e(),a("Submenu",{attrs:{name:"5"}},[a("template",{slot:"title"},[a("Icon",{attrs:{type:"md-settings"}}),e._v("\n                                        系统设置\n                                    ")],1),"1"===e.userType?a("MenuItem",{attrs:{name:"5-1",to:"/index/admmana"}},[e._v("管理员用户")]):e._e(),a("MenuItem",{attrs:{name:"5-2",to:"/index/usercenter"}},[e._v("个人中心")]),"1"===e.userType?a("MenuItem",{attrs:{name:"5-3",to:"/index/regsetting"}},[e._v("学校设置")]):e._e(),a("MenuItem",{attrs:{name:"5-4",to:"/index/updown"}},[e._v("上传下载")]),"1"===e.userType?a("MenuItem",{attrs:{name:"5-5",to:"/index/helping"}},[e._v("使用帮助")]):e._e()],2)],1)],1),a("Content",{style:{padding:"14px",minHeight:"500px",background:"#fff"}},[e._t("default")],2)],1)],1)],1),a("Footer",{staticClass:"layout-footer-center"},[e._v("2018 © Noly1990")])],1)],1)},I=[],w=new n["default"],k={data:function(){return{activeItem:"0-1"}},beforeMount:function(){w.$on("select-item",{item:"1-1"})},components:{},methods:{loginOut:function(){var e=this;this.$Modal.confirm({title:"登出确认",content:"您正准备退出登录？",onOk:function(){document.cookie="",e.$store.dispatch("UserLoginOut"),e.$router.push("/login")}})}},computed:{userType:function(){var e=window.sessionStorage.getItem("userType")||this.$store.getters.userType;return e}}},C=k,T=(a("1b16"),Object(o["a"])(C,b,I,!1,null,"6202a920",null));T.options.__file="Layout.vue";var _=T.exports,x={data:function(){return{}},components:{Layout:_},methods:{}},M=x,S=(a("8f41"),Object(o["a"])(M,v,y,!1,null,"521865fc",null));S.options.__file="Index.vue";var R=S.exports,N=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("sub-title",{attrs:{title:"信息总览"}}),a("div",{staticClass:"overview-box"},[a("Row",[a("Col",{attrs:{span:"12"}},[a("h3",[e._v("全校数据")]),a("div",{staticClass:"total-canvas",attrs:{id:"c1"}})]),a("Col",{attrs:{span:"12"}},[a("h3",[e._v("院系数据")]),a("div",{staticClass:"total-canvas",attrs:{id:"c2"}})])],1)],1)],1)},D=[],$=(a("ac6a"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sub-title-box"},[a("Divider",{attrs:{orientation:"left"}},[a("b",{staticClass:"sub-title"},[e._v(e._s(this.title))])])],1)}),A=[],P={data:function(){return{}},props:{title:String},components:{},methods:{}},B=P,q=(a("c07d"),Object(o["a"])(B,$,A,!1,null,"7ca5c6fd",null));q.options.__file="SubTitle.vue";var O=q.exports,U={data:function(){return{totalPerson:2e3}},beforeMount:function(){},mounted:function(){var e=this;this.$http.get("/admin/showCount/getTotalCount").then(function(t){if(console.log("/admin/ showCount/getTotalCount",t.data),200==t.data.status){var a=t.data.data,n=a.userCount,s=a.passUserCount;e.renderTotal(n,s)}}),this.$http.get("/admin/showCount/getCountByParentId?deptId=-1&deptType=1").then(function(t){console.log("/admin/ showCount/getTotalCount",t.data),200==t.data.status&&e.renderPerAcademy(t.data.data)})},components:{SubTitle:O},methods:{renderTotal:function(e,t){var a=parseFloat((t/e).toFixed(3)),n=1-a,s=[{item:"通过",count:t,percent:a},{item:"未通过",count:e-t,percent:n}],r=new window.G2.Chart({container:"c1",forceFit:!0,height:600,animate:!1});r.source(s,{percent:{formatter:function(e){return e=100*e+"%",e}}}),r.coord("theta",{radius:.75,innerRadius:.6}),r.tooltip({showTitle:!1,itemTpl:'<li><span style="background-color:{color};" class="g2-tooltip-marker"></span>{name}: {value}</li>'}),r.guide().html({position:["50%","50%"],html:'<div style="color:#8c8c8c;font-size: 14px;text-align: center;width: 10em;">学生总数<br><span style="color:#8c8c8c;font-size:20px">'.concat(e,"</span>人</div>"),alignX:"middle",alignY:"middle"});var o=r.intervalStack().position("percent").color("item").label("percent",{formatter:function(e,t){return t.point.item+": "+e}}).tooltip("item*percent",function(e,t){return t=100*t+"%",{name:e,value:t}}).style({lineWidth:1,stroke:"#fff"});r.render(),o.setSelected(s[0])},renderPerAcademy:function(e){var t=[{name:"总数"},{name:"通过"}],a=[];e.forEach(function(e){a.push(e.deptName),t[0][e.deptName]=e.userCount,t[1][e.deptName]=e.passUserCount}),console.log("fileds",a);var n=new window.DataSet,s=n.createView().source(t);s.transform({type:"fold",fields:a,key:"院系",value:"通过情况"});var r=new window.G2.Chart({container:"c2",forceFit:!0,height:600});r.source(s),r.intervalStack().position("院系*通过情况").color("name"),r.render()}}},L=U,Q=(a("ed9b"),Object(o["a"])(L,N,D,!1,null,"e2d9e296",null));Q.options.__file="Overview.vue";var E=Q.exports,j=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Row",[a("Col",{attrs:{span:"24"}},[a("sub-title",{attrs:{title:"考试设置"}})],1)],1),a("Alert",{attrs:{type:"warning"}},[e._v("考试总分100分，提交前请-"),a("b",[e._v("计算总分")]),e._v("-为100分，考试岂止时间是考生能够参加正式考试的一个日期范围")]),a("Row",[a("Col",{staticClass:"set-box",attrs:{span:"14"}},[a("h2",[e._v("试题设置")]),a("div",{staticClass:"form"},[a("div",[a("Row",{staticClass:"setting-type-title"},[a("Col",{attrs:{span:"5"}},[e._v("\n                  题型名称\n                ")]),a("Col",{attrs:{span:"5"}},[e._v("\n                  题型总数\n                ")]),a("Col",{attrs:{span:"5"}},[e._v("\n                  考试题数\n                ")]),a("Col",{attrs:{span:"5"}},[e._v("\n                  每题分值\n                ")]),a("Col",{attrs:{span:"4"}},[e._v("\n                  题型总分\n                ")])],1),e._l(e.typeMap,function(t){return a("Row",{key:t.index,staticClass:"type-row"},[a("Col",{attrs:{span:"5"}},[e._v("\n                  "+e._s(t.typeName)+"\n                ")]),a("Col",{attrs:{span:"5"}},[e._v("\n                   "+e._s(t.count)+"\n                ")]),a("Col",{attrs:{span:"5"}},[a("InputNumber",{attrs:{max:t.count,min:0},model:{value:t.selectCount,callback:function(a){e.$set(t,"selectCount",a)},expression:"item.selectCount"}})],1),a("Col",{attrs:{span:"5"}},[a("InputNumber",{attrs:{max:100,min:0},model:{value:t.perScore,callback:function(a){e.$set(t,"perScore",a)},expression:"item.perScore"}})],1),a("Col",{attrs:{span:"4"}},[e._v("\n                  "+e._s(t.perTotal)+"\n                ")])],1)})],2),a("div",{staticClass:"compute-btn"},[a("Row",[a("Col",{attrs:{span:"12"}},[e._v("\n                  当前总分："),a("b",{staticStyle:{color:"red"}},[e._v(e._s(e.totalScore))])]),a("Col",{attrs:{span:"12"}},[a("Button",{attrs:{size:"small",type:"primary"},on:{click:e.computeScore}},[e._v("计算总分")])],1)],1)],1)])]),a("Col",{staticClass:"set-box",attrs:{span:"10"}},[a("h2",[e._v("其他设置")]),a("div",{staticClass:"form"},[a("Form",{attrs:{model:e.setting}},[a("FormItem",{attrs:{label:"考试时间"}},[a("InputNumber",{attrs:{max:180,min:10,step:10,editable:!0},model:{value:e.setting.time,callback:function(t){e.$set(e.setting,"time",t)},expression:"setting.time"}}),e._v(" 分钟\n         ")],1),a("FormItem",{attrs:{label:"通过分数"}},[a("InputNumber",{attrs:{max:100,min:10,step:5,editable:!0},model:{value:e.setting.passScore,callback:function(t){e.$set(e.setting,"passScore",t)},expression:"setting.passScore"}}),e._v(" 分\n         ")],1),a("FormItem",{attrs:{label:"当前岂止设置"}},[e._v("\n           "+e._s(e.setting.disStartTime)+" -- "+e._s(e.setting.disEndTime)+"\n         ")]),a("FormItem",{attrs:{label:"选择起止时间"}},[a("DatePicker",{staticStyle:{width:"200px"},attrs:{"split-panels":"",size:"small",type:"daterange",placement:"top-end",placeholder:"请选择"},on:{"on-change":e.dateChange}})],1)],1)],1)])],1),a("Row",[a("Col",{attrs:{push:18,span:"6"}},[a("Button",{attrs:{type:"success"},on:{click:e.confirmChange}},[e._v("确定")]),a("Button",{staticStyle:{"margin-left":"15px"},attrs:{type:"warning"},on:{click:e.resetInput}},[e._v("重置")])],1)],1)],1)},F=[];a("6b54");function J(e){var t=new Date;return t.setTime(e+"000"),t}function G(e){var t=e.getTime().toString(),a=t.substring(0,t.length-3);return a}function z(e){var t=J(e),a=t.getFullYear(),n=t.getMonth()+1,s=n>9?n:"0".concat(n),r=t.getDate(),o=r>9?r:"0".concat(r),i=t.getHours(),l=i>9?i:"0".concat(i),c=t.getMinutes(),d=c>9?c:"0".concat(c);return"".concat(a,"-").concat(s,"-").concat(o," ").concat(l,":").concat(d)}var W={data:function(){return{totalScore:0,setting:{singleNum:10,time:30,startTime:"",endTime:"",passScore:60,disStartTime:"",disEndTime:""},typeMap:{},quesTypeArr:[],typeSettingArr:[],timeRangeArr:["",""]}},beforeMount:function(){var e=this;this.getQuesType().then(function(t){console.log("---------------\x3e",t.data),200==t.data.status?(e.formatTypeArr(t.data.data),e.getRecentSetting()):e.$Message.error("获取配置失败")})},components:{SubTitle:O},methods:{formatTypeArr:function(e){var t=this;this.quesTypeArr=[],this.typeMap={},e.forEach(function(e){if(e.count>0){var a={},n=e.typeId;t.typeMap[n]={},t.typeMap[n].typeId=e.typeId,t.typeMap[n].typeName=e.typeName,t.typeMap[n].count=e.count,a.typeName=e.typeName,a.count=e.count,a.typeId=e.typeId,t.quesTypeArr.push(a)}})},computeScore:function(){var e=0;for(var t in this.typeMap)if(this.typeMap[t].selectCount>0){if(!(this.typeMap[t].perScore>0))return void this.$Message.error("每题分数存在0分设置");this.typeMap[t].perTotal=this.typeMap[t].selectCount*this.typeMap[t].perScore,e+=this.typeMap[t].selectCount*this.typeMap[t].perScore}this.totalScore=e,100!==e&&this.$Message.error("提醒！总分不为100分")},confirmChange:function(){var e=this,t=0,a=[];for(var n in this.typeMap)if(this.typeMap[n].selectCount>0){if(!(this.typeMap[n].perScore>0))return void this.$Message.error("每题分数存在0分设置");this.typeMap[n].perTotal=this.typeMap[n].selectCount*this.typeMap[n].perScore,t+=this.typeMap[n].selectCount*this.typeMap[n].perScore;var s={};s.questionTypeId=this.typeMap[n].typeId,s.num=this.typeMap[n].selectCount,s.score=this.typeMap[n].perScore,a.push(s)}if(this.totalScore=t,100===t)if(this.setting.time>9&&this.setting.time<181)if(this.setting.passScore>0&&this.setting.passScore<101)if(this.timeRangeArr[0].length>0){var r=this.timeRangeArr[0],o=this.timeRangeArr[1],i=new Date(r),l=new Date(o),c=G(i),d=G(l);console.log(i,l),console.log(c,d),this.$http.post("/admin/examRule/saveExamRule",{examPassScore:this.setting.passScore,examTime:this.setting.time,examTotal:100,examJson:JSON.stringify(a),startTime:c,endTime:d}).then(function(t){200==t.data.status?(e.$Message.success("设置成功"),e.resetInput()):e.$Message.error("设置失败")})}else this.setting.startTime&&this.setting.endTime?this.$http.post("/admin/examRule/saveExamRule",{examPassScore:this.setting.passScore,examTime:this.setting.time,examTotal:100,examJson:JSON.stringify(a)}).then(function(t){200==t.data.status?(e.$Message.success("设置成功"),e.resetInput()):e.$Message.error("设置失败")}):this.$Message.error("请先设置时间");else this.$Message.error("通过分数设置错误");else this.$Message.error("考试时间设置错误，范围10-180分钟");else this.$Message.error("提醒！总分不为100分")},mergeSettingIntoArr:function(e){var t=this;if(e.length>0){var a=function(a){e.forEach(function(e){t.typeMap[a].typeId===e.questionTypeId&&(t.typeMap[a].selectCount=e.num,t.typeMap[a].perScore=e.score,t.typeMap[a].perTotal=e.num*e.score)})};for(var n in this.typeMap)a(n)}for(var n in this.typeMap)this.typeMap[n].selectCount||(this.typeMap[n].selectCount=0,this.typeMap[n].perScore=0,this.typeMap[n].perTotal=0);this.$forceUpdate(),this.computeScore()},getQuesType:function(){return this.$http.get("/admin/question/getQuestionType")},getRecentSetting:function(){var e=this;this.$http.get("/admin/examRule/getExamRule").then(function(t){if(console.log("/admin/examRule/getExamRule",t.data),200==t.data.status){var a=t.data.data;a?(e.setting.time=parseInt(a.examTime),e.setting.passScore=a.examPassScore,e.setting.startTime=a.startTime,e.setting.endTime=a.endTime,e.setting.startDate=J(a.startTime),e.setting.endDate=J(a.endTime),e.setting.disStartTime=e.setting.startDate.toLocaleDateString(),e.setting.disEndTime=e.setting.endDate.toLocaleDateString(),e.typeSettingArr=JSON.parse(a.examJson),e.mergeSettingIntoArr(e.typeSettingArr)):(e.setting.startTime=null,e.setting.endTime=null,e.setting.disStartTime="未设置",e.setting.disEndTime="未设置",e.typeSettingArr=[],e.mergeSettingIntoArr(e.typeSettingArr))}else e.$Message.error("网络错误")})},resetInput:function(){this.getRecentSetting()},dateChange:function(e){console.log("changed"),this.timeRangeArr[0]=e[0],this.timeRangeArr[1]=e[1],console.log("now",this.timeRangeArr)}}},H=W,V=(a("e1d6"),Object(o["a"])(H,j,F,!1,null,"cd0dae2e",null));V.options.__file="Examsetting.vue";var Y=V.exports,Z=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-box"},[a("sub-title",{attrs:{title:"试题管理"}}),a("Alert",{attrs:{type:"warning",closable:""}},[e._v("先选择题目按分类查询，双击修改相应条目")]),a("div",{staticClass:"table-box"},[a("Row",[a("Col",{staticClass:"btn-box",attrs:{span:"18"}},[a("ButtonGroup",[a("Button",{attrs:{type:"primary"},on:{click:e.addNewQues}},[e._v("新增题目")]),a("Button",{attrs:{type:"error"},on:{click:e.deleteLotOfQues}},[e._v("批量删除")])],1)],1),a("Col",{attrs:{span:"6"}},[a("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择题目分类"},on:{"on-change":e.changeCate},model:{value:e.displayDataInfo.displayCate,callback:function(t){e.$set(e.displayDataInfo,"displayCate",t)},expression:"displayDataInfo.displayCate"}},e._l(e.tableCategoryList,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}))],1)],1),a("Table",{attrs:{"no-data-text":"暂无数据",loading:e.tableLoading,"highlight-row":!0,size:"small",border:"",columns:e.columnsData,data:e.tableData},on:{"on-selection-change":e.tableSelectChange,"on-row-dblclick":e.clickRow}}),a("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:e.displayDataInfo.total,"page-size":30,current:e.currentPage},on:{"on-change":e.changePage}})],1)]),a("Modal",{attrs:{width:"500"},model:{value:e.dblclickModal,callback:function(t){e.dblclickModal=t},expression:"dblclickModal"}},[a("p",{attrs:{slot:"header"},slot:"header"},[a("span",[e._v(e._s(e.modalTitle))])]),a("div",[a("Row",[a("Col",{staticClass:"modal-question",attrs:{span:"24"}},[a("p",[e._v("题目：")]),a("Input",{attrs:{disabled:e.inputDis,type:"textarea",placeholder:"题目题干"},model:{value:e.clickRecentQ.question,callback:function(t){e.$set(e.clickRecentQ,"question",t)},expression:"clickRecentQ.question"}})],1),e.clickRecentQ.isImg?a("Col",{staticClass:"img-box",attrs:{span:"24"}},[a("img",{staticClass:"question-img",attrs:{src:e.clickRecentQ.url,alt:"img"}})]):e._e()],1),a("Row",[a("Col",{staticClass:"modal-answer-item",attrs:{span:"12"}},[a("p",[e._v("答案A:")]),a("Input",{attrs:{disabled:e.inputDis,type:"textarea",placeholder:"答案A"},model:{value:e.clickRecentQ.answer1,callback:function(t){e.$set(e.clickRecentQ,"answer1",t)},expression:"clickRecentQ.answer1"}})],1),a("Col",{staticClass:"modal-answer-item",attrs:{span:"12"}},[a("p",[e._v("答案B:")]),a("Input",{attrs:{disabled:e.inputDis,type:"textarea",placeholder:"答案B"},model:{value:e.clickRecentQ.answer2,callback:function(t){e.$set(e.clickRecentQ,"answer2",t)},expression:"clickRecentQ.answer2"}})],1)],1),a("Row",[a("Col",{staticClass:"modal-answer-item",attrs:{span:"12"}},[a("p",[e._v("答案C:")]),a("Input",{attrs:{disabled:e.inputDis,type:"textarea",placeholder:"答案C"},model:{value:e.clickRecentQ.answer3,callback:function(t){e.$set(e.clickRecentQ,"answer3",t)},expression:"clickRecentQ.answer3"}})],1),a("Col",{staticClass:"modal-answer-item",attrs:{span:"12"}},[a("p",[e._v("答案D:")]),a("Input",{attrs:{disabled:e.inputDis,type:"textarea",placeholder:"答案D"},model:{value:e.clickRecentQ.answer4,callback:function(t){e.$set(e.clickRecentQ,"answer4",t)},expression:"clickRecentQ.answer4"}})],1)],1),a("Row",[a("Col",{staticClass:"modal-answer-item",attrs:{span:"12"}},[a("p",[e._v("正确答案:")]),a("Select",{staticStyle:{width:"200px"},attrs:{disabled:e.inputDis},model:{value:e.clickRecentQ.right,callback:function(t){e.$set(e.clickRecentQ,"right",t)},expression:"clickRecentQ.right"}},e._l(e.rightList,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}))],1),a("Col",{staticClass:"modal-answer-item",attrs:{span:"12"}},[a("p",[e._v("题目分类:")]),a("Select",{staticStyle:{width:"200px"},attrs:{disabled:e.inputDis},model:{value:e.clickRecentQ.categoryId,callback:function(t){e.$set(e.clickRecentQ,"categoryId",t)},expression:"clickRecentQ.categoryId"}},e._l(e.categoryList,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}))],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[e.clickRecentQ.isImg?a("Button",{attrs:{type:"info"}},[e._v("更换图片")]):e._e(),e.isAddNew?e._e():a("Button",{attrs:{type:"error",loading:e.delete_loading},on:{click:e.deleteRecent}},[e._v("删除")]),a("Button",{attrs:{type:e.crtBtnType,loading:e.correct_loading},on:{click:e.correctRecent}},[e._v(e._s(e.crtBtnTitle))])],1)])],1)],1)},X=[],K={data:function(){return{modalTitle:"题目详情",isAddNew:!0,selectionArr:[],crtBtnType:"warning",crtBtnTitle:"修改",inputDis:!1,currentPage:1,tableLoading:!1,displayDataInfo:{displayCate:null,total:0},delete_loading:!1,correct_loading:!1,tableCategoryList:[],categoryList:[],rightList:[{label:"A",value:1},{label:"B",value:2},{label:"C",value:3},{label:"D",value:4}],clickRecentQ:{questionId:1,categoryId:1,categoryName:"数学题",isImg:!0,questionForm:1,question:"这是耨一个问题的体感啊快点哈可是你查看节哀顺变节哀顺变就卡巴斯基啊",answer1:"罚款就放假的时间你叫撒房间索南达杰啊",url:"http://www.baidu.com/img/bd_logo1.png",answer2:"啊看见回到家啊可是低价按时",answer3:"达到hi啊滴哈死的好次啊时间的慈爱",answer4:"j你覅啊送积分哦啊睡觉分类科目撒口父母开",right:3},dblclickModal:!1,category:[],columnsData:[{type:"selection",width:50,align:"center"},{title:"分类",width:100,key:"categoryName"},{title:"题目",width:200,key:"question"},{title:"是否图片题",key:"isImg"},{title:"答案A",key:"answer1"},{title:"答案B",key:"answer2"},{title:"答案C",key:"answer3"},{title:"答案D",key:"answer4"},{title:"正确答案",key:"right"}],tableData:[]}},beforeMount:function(){this.getQuesType()},components:{SubTitle:O},methods:{changeCate:function(e){var t=this;console.log("select change",e),this.tableLoading=!0,this.displayDataInfo.displayCate=e,this.$http.get("/admin/question/getQuestionByType?questionTypeId=".concat(e,"&page=1&row=30")).then(function(e){if(console.log("/admin/question/getQuestionByType",e.data),t.tableLoading=!1,200==e.data.status)if(e.data.data.count>0){var a=e.data.data.questionList;t.formatTable(a),t.displayDataInfo.total=e.data.data.count,t.currentPage=1}else t.tableData=[]})},getQuesType:function(){var e=this;this.$http.get("/admin/question/getQuestionType").then(function(t){if(console.log("获取题目分类",t.data),200==t.data.status){var a=t.data.data;e.formatCateMap(a),e.formatCateList(a),e.formatTableCateList(a)}})},setRecentQ:function(e){this.isAddNew=!1,this.clickRecentQ={},this.clickRecentQ.question=e.question,this.clickRecentQ.answer1=e.answer1,this.clickRecentQ.answer2=e.answer2,this.clickRecentQ.answer3=e.answer3,this.clickRecentQ.answer4=e.answer4,this.clickRecentQ.right=e.right,this.clickRecentQ.categoryId=e.categoryId,this.clickRecentQ.categoryName=e.categoryName,this.clickRecentQ.questionForm=e.questionForm,this.clickRecentQ.questionId=e.questionId,this.inputDis=!0,this.resetCrtBtn(),e.questionForm?(this.clickRecentQ.isImg=!0,this.clickRecentQ.url=e.url):(this.clickRecentQ.isImg=!1,this.clickRecentQ.url="")},clickRow:function(e){console.log("double click row",e),this.setRecentQ(e),this.dblclickModal=!0,this.modalTitle="题目详情"},deleteRecent:function(){var e=this;console.log("删除当前试题"),this.$Modal.confirm({title:"删除确认",content:"请确认是否删除本题？",onOk:function(){var t=e.clickRecentQ.questionId,a=[];a.push(t),e.$http.post("/admin/question/deleteQuestionById",{questionIdsJson:JSON.stringify(a)}).then(function(t){200==t.data.status?(e.$Message.success("删除成功"),e.dblclickModal=!1):e.$Message.error("删除失败")})}})},refreshTable:function(){var e=this.currentPage;this.getEachPage(e)},resetCrtBtn:function(){this.crtBtnType="warning",this.crtBtnTitle="修改"},correctRecent:function(){var e=this;if(this.inputDis)console.log("可以修改"),this.inputDis=!1,this.crtBtnType="success",this.crtBtnTitle="确定";else if(this.isAddNew){var t=this.clickRecentQ,a=t.question,n=t.questionForm,s=t.answer1,r=t.answer2,o=t.answer3,i=t.answer4,l=t.right,c=t.categoryId;a.length>0&&s.length>0&&r.length>0&&o.length>0&&i.length&&l&&c?(console.log("param check success"),this.$http.post("/admin/question/saveQuestion",{questionTypeId:c,questionForm:n,questionTitle:a,optionA:s,optionB:r,optionC:o,optionD:i,answer:l}).then(function(t){console.log("/admin/question/saveQuestion---------------\x3e",t.data),200==t.data.status?(e.$Message.success("新建试题成功"),e.dblclickModal=!1):e.$Message.error("新建试题失败")})):this.$Message.error("请检查输入")}else{var d=this.clickRecentQ,u=d.question,p=d.answer1,h=d.answer2,f=d.answer3,m=d.answer4,g=d.right,v=d.categoryId,y=d.questionId;this.$http.post("/admin/question/updateQuestion",{questionId:y,questionTypeId:v,questionTitle:u,optionA:p,optionB:h,optionC:f,optionD:m,answer:g}).then(function(t){console.log("/admin/question/updateQuestion",t.data),200==t.data.status?(e.$Message.success({content:"修改成功"}),e.refreshTable(),e.dblclickModal=!1):e.$Message.error({content:"修改失败，请检查"})})}},formatTable:function(e){var t=this;this.tableData=[],e.forEach(function(e){var a={};a.question=e.questionTitle,a.answer1=e.optionA,a.answer2=e.optionB,a.answer3=e.optionC,a.answer4=e.optionD,a.right=e.answer,a.isImg=e.questionForm>0?"是":"否",a.questionId=e.questionId,a.categoryId=e.questionTypeId,a.categoryName=e.questionTypeName,t.tableData.push(a)})},formatCateMap:function(e){var t=this;this.cateMap=Object.create(null),e.forEach(function(e){t.cateMap[e.typeId]=e.typeName})},formatTableCateList:function(e){var t=this;this.tableCategoryList=[],this.tableCategoryList.push({label:"全部",value:-1}),e.forEach(function(e){var a={};a.label=e.typeName,a.value=e.typeId,t.tableCategoryList.push(a)})},formatCateList:function(e){var t=this;this.categoryList=[],e.forEach(function(e){var a={};a.label=e.typeName,a.value=e.typeId,t.categoryList.push(a)})},changePage:function(e){console.log("change page",e),this.currentPage=e,this.getEachPage(e)},getEachPage:function(e){var t=this,a=this.displayDataInfo.displayCate;this.$http.get("/admin/question/getQuestionByType?questionTypeId=".concat(a,"&page=").concat(e,"&row=30")).then(function(e){if(console.log("/admin/question/getQuestionByType",e.data),t.tableLoading=!1,200==e.data.status)if(e.data.data.count>0){t.displayDataInfo.total=e.data.data.count;var a=e.data.data.questionList;t.formatTable(a)}else t.tableData=[]})},tableSelectChange:function(e){console.log("selection",e),this.selectionArr=e},deleteLotOfQues:function(){var e=this;if(this.selectionArr.length>0){var t=this.selectionArr.length;this.$Modal.confirm({title:"删除确认",content:"请确认是否删除选中的".concat(t,"条问题？"),onOk:function(){var t=[];e.selectionArr.forEach(function(e){t.push(e.questionId)}),e.$http.post("/admin/question/deleteQuestionById",{questionIdsJson:JSON.stringify(t)}).then(function(t){200==t.data.status?(e.$Message.success("删除成功"),e.refreshTable(),e.dblclickModal=!1):e.$Message.error("删除失败")})}})}else this.$Message.error({content:"请选择至少一条"})},addNewQues:function(){this.modalTitle="新增题目",this.clickRecentQ={},this.clickRecentQ.question="",this.clickRecentQ.answer1="",this.clickRecentQ.answer2="",this.clickRecentQ.answer3="",this.clickRecentQ.answer4="",this.clickRecentQ.right=null,this.clickRecentQ.categoryId=null,this.clickRecentQ.categoryName=null,this.clickRecentQ.questionForm=0,this.clickRecentQ.questionId="new question",this.resetCrtBtn(),this.clickRecentQ.isImg=!1,this.clickRecentQ.url="",this.isAddNew=!0,this.inputDis=!1,this.crtBtnType="success",this.crtBtnTitle="确定",this.dblclickModal=!0}}},ee=K,te=(a("fc0e"),Object(o["a"])(ee,Z,X,!1,null,"9708d9d6",null));te.options.__file="QuestionsMana.vue";var ae=te.exports,ne=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-box"},[a("sub-title",{attrs:{title:"试题分类"}}),a("Alert",{attrs:{type:"warning",closable:""}},[e._v("双击相应条目删除，分类下还有试题的暂不支持删除，请前往试题管理删除相应的题目")]),a("div",{staticClass:"table-box"},[a("Row",[a("Col",{staticClass:"btn-box",attrs:{span:"24"}},[a("ButtonGroup",[a("Button",{attrs:{type:"primary"},on:{click:e.addNewCate}},[e._v("新增分类")])],1),a("Modal",{attrs:{width:"360"},model:{value:e.deleteModal,callback:function(t){e.deleteModal=t},expression:"deleteModal"}},[a("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[a("Icon",{attrs:{type:"ios-information-circle"}}),a("span",[e._v("删除"+e._s(this.aimCateName))])],1),a("div",{staticStyle:{"text-align":"center"}},[a("p",[e._v("分类下仍有题目不可删除，请先前往试题管理删除相应试题.")]),a("p",[e._v("确认删除?")])]),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"error",size:"large",long:"",loading:e.deleteLoading},on:{click:e.confirmDel}},[e._v("删除")])],1)])],1)],1),a("Table",{attrs:{size:"small",border:"",columns:e.columnsData,data:e.tableData},on:{"on-row-dblclick":e.clickDel}})],1)],1)},se=[],re={data:function(){return{aimCateName:"",aimCateID:null,deleteLoading:!1,newCate:"",deleteModal:!1,columnsData:[{title:"序号",key:"index"},{title:"分类名",key:"cateName"},{title:"分类ID",key:"cateID"},{title:"试题数",key:"qNum"}],tableData:[]}},beforeMount:function(){this.getRecentCate()},components:{SubTitle:O},methods:{getRecentCate:function(){var e=this;this.$http.get("/admin/question/getQuestionType").then(function(t){if(console.log("/admin/question/getQuestionType",t.data),200==t.data.status){var a=t.data.data;e.formatTable(a)}})},formatTable:function(e){var t=this;this.tableData=[];var a=1;e.forEach(function(e){var n={};n.index=a,n.cateName=e.typeName,n.cateID=e.typeId,n.qNum=e.count,t.tableData.push(n),a++})},addNewCate:function(){var e=this;this.$Modal.confirm({render:function(t){return t("Input",{props:{value:e.newCate,autofocus:!0,placeholder:"请填写新分类名称..."},on:{input:function(t){e.newCate=t}}})},onOk:function(){console.log("你安乐确定"),e.$http.post("/admin/question/saveQuestionType",{typeName:e.newCate}).then(function(t){console.log("/admin/question/saveQuestionType",t.data),200==t.data.status&&(e.$Message.success({content:"新增分类成功"}),e.getRecentCate(),e.newCate="")})},onCancel:function(){console.log("取消"),e.newCate=""}})},closeDelModal:function(){this.aimCateName="",this.aimCateID=null,this.deleteLoading=!1,this.deleteModal=!1},clickDel:function(e){console.log(e),0===e.qNum?(this.aimCateName=e.cateName,this.aimCateID=e.cateID,this.deleteModal=!0):this.$Message.error("该分类下还有试题")},confirmDel:function(){var e=this;this.deleteLoading=!0,this.$http.post("/admin/question/deleteQuestionType?typeId=".concat(this.aimCateID)).then(function(t){console.log("/admin/question/deleteQuestionType",t.data),200==t.data.status?(e.deleteLoading=!1,e.$Message.success({content:"删除成功！"}),e.getRecentCate(),e.closeDelModal()):(e.deleteLoading=!1,e.$Message.error({content:"删除失败！"}))})}}},oe=re,ie=(a("fcf7"),Object(o["a"])(oe,ne,se,!1,null,"4a1209d4",null));ie.options.__file="QuestionsCate.vue";var le=ie.exports,ce=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-box"},[a("sub-title",{attrs:{title:"学生管理"}}),a("div",{staticClass:"table-box"},[a("Row",[a("Col",{staticClass:"btn-box",attrs:{span:"24"}},[a("ButtonGroup",[a("Button",{attrs:{type:"primary"},on:{click:e.openSearchModal}},[e._v("按条件查询")]),a("Button",{attrs:{type:"error"},on:{click:e.deleteLotOfStus}},[e._v("批量删除")]),a("Button",{attrs:{type:"warning"},on:{click:e.cleanSearch}},[e._v("清除查询")])],1)],1)],1),a("Table",{attrs:{loading:e.tableLoading,size:"small",border:"",columns:e.columnsData,data:e.tableData},on:{"on-selection-change":e.tableSelectChange,"on-row-dblclick":e.clickRow}}),a("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:e.tableTotal,"page-size":30,current:e.currentPage},on:{"on-change":e.changePage}})],1)])],1),a("Modal",{model:{value:e.searchModal,callback:function(t){e.searchModal=t},expression:"searchModal"}},[a("p",{attrs:{slot:"header"},slot:"header"},[a("span",[e._v("按条件查询")])]),a("Tabs",{model:{value:e.searchInfo.recentTab,callback:function(t){e.$set(e.searchInfo,"recentTab",t)},expression:"searchInfo.recentTab"}},[a("TabPane",{attrs:{label:"按班级",name:"tab1"}},[a("Cascader",{staticStyle:{width:"200px"},attrs:{transfer:"",data:e.cascaderData},model:{value:e.searchInfo.classDeptArr,callback:function(t){e.$set(e.searchInfo,"classDeptArr",t)},expression:"searchInfo.classDeptArr"}})],1),a("TabPane",{attrs:{label:"按年级",name:"tab2"}},[a("Cascader",{staticStyle:{width:"200px"},attrs:{transfer:"",data:e.gradeCascader},model:{value:e.searchInfo.gradeDeptArr,callback:function(t){e.$set(e.searchInfo,"gradeDeptArr",t)},expression:"searchInfo.gradeDeptArr"}})],1),a("TabPane",{attrs:{label:"按院系",name:"tab3"}},[a("Cascader",{staticStyle:{width:"200px"},attrs:{transfer:"",data:e.academyCascader},model:{value:e.searchInfo.academyDeptArr,callback:function(t){e.$set(e.searchInfo,"academyDeptArr",t)},expression:"searchInfo.academyDeptArr"}})],1),a("TabPane",{attrs:{label:"关键字",name:"tab4"}},[e._v("\n        关键词："),a("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"搜索关键词"},model:{value:e.searchInfo.keyWord,callback:function(t){e.$set(e.searchInfo,"keyWord",t)},expression:"searchInfo.keyWord"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:e.confirmSearch}},[e._v("搜索")])],1)],1),a("Modal",{attrs:{width:"500"},model:{value:e.dblclickModal,callback:function(t){e.dblclickModal=t},expression:"dblclickModal"}},[a("p",{attrs:{slot:"header"},slot:"header"},[a("span",[e._v("学生详情")])]),a("div",[a("Row",[a("Col",{staticClass:"input-item",attrs:{span:"24"}},[a("p",{staticClass:"input-item-title"},[e._v("姓名：")]),a("Input",{staticStyle:{width:"300px"},attrs:{disabled:e.inputDis,placeholder:"姓名"},model:{value:e.clickRecentStu.name,callback:function(t){e.$set(e.clickRecentStu,"name",t)},expression:"clickRecentStu.name"}})],1)],1),a("Row",[a("Col",{staticClass:"input-item",attrs:{span:"24"}},[a("p",{staticClass:"input-item-title"},[e._v("学号：")]),a("Input",{staticStyle:{width:"300px"},attrs:{disabled:"",placeholder:"学号"},model:{value:e.clickRecentStu.stuId,callback:function(t){e.$set(e.clickRecentStu,"stuId",t)},expression:"clickRecentStu.stuId"}})],1)],1),a("Row",[a("Col",{staticClass:"input-item",attrs:{span:"24"}},[a("p",{staticClass:"input-item-title"},[e._v("性别：")]),a("RadioGroup",{model:{value:e.clickRecentStu.sex,callback:function(t){e.$set(e.clickRecentStu,"sex",t)},expression:"clickRecentStu.sex"}},[a("Radio",{attrs:{label:0,disabled:e.inputDis}},[e._v("男")]),a("Radio",{attrs:{label:1,disabled:e.inputDis}},[e._v("女")])],1)],1)],1),a("Row",[a("Col",{staticClass:"input-item",attrs:{span:"24"}},[a("p",{staticClass:"input-item-title"},[e._v("院系/年级/班级：")]),a("Cascader",{staticStyle:{width:"300px"},attrs:{disabled:e.inputDis,data:e.cascaderData},model:{value:e.clickRecentStu.deptArr,callback:function(t){e.$set(e.clickRecentStu,"deptArr",t)},expression:"clickRecentStu.deptArr"}})],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"info"},on:{click:e.correctPwd}},[e._v("修改学生密码")]),a("Button",{attrs:{type:"error",loading:e.delete_loading},on:{click:e.deleteRecent}},[e._v("删除")]),a("Button",{attrs:{type:e.crtBtnType,loading:e.correct_loading},on:{click:e.correctRecent}},[e._v(e._s(e.crtBtnTitle))])],1)])],1)},de=[],ue=(a("20d6"),a("96cf"),a("3040")),pe={data:function(){return{searchModal:!1,newPwd:"",selectionArr:[],tableLoading:!1,currentPage:1,tableTotal:0,delete_loading:!1,correct_loading:!1,crtBtnType:"warning",crtBtnTitle:"修改",dblclickModal:!1,cascaderData:[],gradeCascader:[],academyCascader:[],clickRecentStu:{},inputDis:!0,tableMode:"default",searchInfo:{confirmTab:"tab1",recentTab:"tab1",classDeptArr:[],gradeDeptArr:[],academyDeptArr:[],keyWord:""},columnsData:[{type:"selection",width:50,align:"center"},{title:"姓名",key:"name"},{title:"学号",key:"stuId"},{title:"性别",width:80,key:"sexStr"},{title:"院系",key:"academy"},{title:"年级",key:"grade"},{title:"班级",key:"class"}],tableData:[]}},beforeMount:function(){var e=Object(ue["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getDeptInfo();case 2:if(!e.sent){e.next=4;break}this.getAllStusPerPage(1);case 4:this.getDeptTree();case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),components:{SubTitle:O},methods:{cleanSearch:function(){this.getAllStusPerPage(1)},openSearchModal:function(){this.searchModal=!0},confirmSearch:function(){this.getSearchResult(1,this.searchInfo.recentTab)},getSearchResult:function(e,t){var a,n,s,r=this;switch(t){case"tab1":this.searchInfo.classDeptArr.length>0&&(a=5,n=this.searchInfo.classDeptArr[2]);break;case"tab2":this.searchInfo.gradeDeptArr.length>0&&(a=3,n=this.searchInfo.gradeDeptArr[1]);break;case"tab3":this.searchInfo.academyDeptArr.length>0&&(a=1,n=this.searchInfo.academyDeptArr[0]);break;case"tab4":s=this.searchInfo.keyWord;break;default:break}this.tableMode="search",this.tableLoading=!0,this.searchInfo.confirmTab=t,this.$http.post("/admin/manage/queryUserList",{deptType:a,deptId:n,userType:5,keyWord:s,page:e,row:30}).then(function(e){if(200==e.data.status){r.tableLoading=!1;var t=e.data.data.userList;r.tableTotal=e.data.data.count,r.formatTableData(t),r.searchModal=!1}else r.$Message.error("查询错误")})},formatCascaderData:function(){this.cascaderData=[]},getDeptTree:function(){var e=this;this.$http.get("/admin/dept/getDeptNodeTree").then(function(t){if(console.log("dept info",t.data),200==t.data.status){var a=t.data.data;console.log("dept tree",a);var n=JSON.parse(JSON.stringify(a)),s=JSON.parse(JSON.stringify(a)),r=JSON.parse(JSON.stringify(a));n=he(n),s=he(s),r=he(r),e.cascaderData=fe(n,"normal"),e.gradeCascader=fe(s,"grade"),e.academyCascader=fe(r,"academy")}else e.$Message.error({content:"网络错误"})})},getDeptInfo:function(){var e=this;return new Promise(function(t,a){e.deptMap=Object.create(null),e.$http.get("/admin/dept/getAllDept").then(function(n){if(console.log("dept info",n.data),200==n.data.status){var s=n.data.data;s.forEach(function(t){e.deptMap[t.deptId]=t.deptName}),t(!0)}else e.$Message.error({content:"网络错误"}),a(!1)})})},filterUsers:function(){},getAllStusPerPage:function(e){var t=this;this.tableLoading=!0,this.tableMode="default",this.$http.get("/admin/manage/getAllstudents?page=".concat(e,"&row=30")).then(function(e){if(console.log("/admin/manage/getAllstudents",e.data),200==e.data.status){t.tableLoading=!1;var a=e.data.data.userList;t.tableTotal=e.data.data.count,t.formatTableData(a)}else t.tableLoading=!1,t.$Message.error({content:"网络错误"})})},formatTableData:function(e){var t=this;this.tableData=[],e.forEach(function(e){var a={};a.name=e.realName,a.sex=e.sex,a.sexStr=e.sex>0?"女":"男",a.userId=e.userId,a.stuId=e.userName,a.academy=t.deptMap[e.academyId],a.grade=t.deptMap[e.gradeId],a.class=t.deptMap[e.classId],a.academyId=e.academyId,a.gradeId=e.gradeId,a.classId=e.classId,a.reg="统一导入",t.tableData.push(a)})},changePage:function(e){this.currentPage=e,console.log("页面切换了",e,this.currentPage),"default"===this.tableMode?this.getAllStusPerPage(this.currentPage):"search"===this.tableMode&&this.getSearchResult(this.currentPage,this.searchInfo.confirmTab)},clickRow:function(e){this.resetCrtBtn(),this.dblclickModal=!0,this.clickRecentStu.name=e.name,this.clickRecentStu.userId=e.userId,this.clickRecentStu.stuId=e.stuId,this.clickRecentStu.sex=e.sex,this.clickRecentStu.deptArr=[e.academyId,e.gradeId,e.classId],console.log(this.clickRecentStu.deptArr)},resetCrtBtn:function(){this.inputDis=!0,this.crtBtnType="warning",this.crtBtnTitle="修改"},deleteRecent:function(){var e=this;console.log("删除当前学生"),this.$Modal.confirm({title:"删除确认",content:"请确认是否删除<b>".concat(this.clickRecentStu.name,"？</b>"),onOk:function(){var t=e.clickRecentStu.userId,a=[];a.push(t),e.$http.post("/admin/manage/deleteUsers",{userIdJson:JSON.stringify(a)}).then(function(t){200==t.data.status?(e.$Message.success("删除成功"),e.refreshRecentTable(),e.dblclickModal=!1):e.$Message.error("删除失败")})}})},refreshRecentTable:function(){"default"===this.tableMode?this.getAllStusPerPage(this.currentPage):"search"===this.tableMode&&this.getSearchResult(this.currentPage,this.searchInfo.confirmTab)},correctRecent:function(){var e=this;if(this.inputDis)console.log("可以修改"),this.inputDis=!1,this.crtBtnType="success",this.crtBtnTitle="确定";else{console.log("确认修改");var t=this.clickRecentStu,a=t.stuId,n=t.name,s=t.userId,r=t.deptArr,o=t.sex;"未分组"===this.deptMap[r[0]]&&(r[1]=r[0],r[2]=r[0]),this.$http.post("/admin/manage/updateTeacher",{userId:s,userType:5,userName:a,realName:n,sex:o,academyId:r[0],gradeId:r[1],classId:r[2]}).then(function(t){console.log("update user info ",t.data),200==t.data.status?(e.$Message.success({content:"修改成功"}),e.refreshRecentTable(),e.dblclickModal=!1):e.$Message.error({contetn:"修改失败"})})}},correctPwd:function(){var e=this;console.log("修改当前学生密码"),this.newPwd="",this.$Modal.confirm({render:function(t){return t("Input",{props:{value:e.newPwd,autofocus:!0,placeholder:"输入新密码"},on:{input:function(t){e.newPwd=t}}})},onCancel:function(){console.log("点了取消"),e.newPwd=""},onOk:function(){var t=Object(ue["a"])(regeneratorRuntime.mark(function t(){var a,n,s,r,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:console.log("点了确定"),e.newPwd.length>5&&e.newPwd.length<20?(a=e.clickRecentStu,n=a.stuId,s=a.name,r=a.userId,o=a.deptArr,e.$http.post("/admin/manage/updateTeacher",{userId:r,userType:5,userName:n,realName:s,password:e.newPwd,academyId:o[0],gradeId:o[1],classId:o[2]}).then(function(t){console.log("update user info ",t.data),200==t.data.status?(e.$Message.success({content:"修改成功"}),e.refreshRecentTable(),e.dblclickModal=!1):e.$Message.error({contetn:"修改失败"})})):e.$Message.error("修改失败,请检查输入的密码");case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()})},deleteLotOfStus:function(){var e=this;if(this.selectionArr.length>0){var t=this.selectionArr.length;this.$Modal.confirm({title:"删除确认",content:"请确认是否删除选中的".concat(t,"名学生？"),onOk:function(){var t=[];e.selectionArr.forEach(function(e){t.push(e.userId)}),e.$http.post("/admin/manage/deleteUsers",{userIdJson:JSON.stringify(t)}).then(function(t){200==t.data.status?(e.$Message.success("删除成功"),e.refreshRecentTable(),e.dblclickModal=!1):e.$Message.error("删除失败")})}})}else this.$Message.error({content:"请选择至少一条"})},tableSelectChange:function(e){console.log("selection",e),this.selectionArr=e}}};function he(e){var t=e.slice(0),a=t.findIndex(function(e){return 0===e.deptType}),n=t[a];return t.splice(a,1),t.push(n),t}function fe(e,t){return e.forEach(function(e){switch(t){case"normal":break;case"grade":3==e.deptType&&delete e.children;break;case"academy":1==e.deptType&&delete e.children;break;default:break}e.label=e.deptName,e.value=e.deptId,e.children&&e.children.length>0?fe(e.children,t):delete e.children}),e}var me=pe,ge=(a("7fae"),Object(o["a"])(me,ce,de,!1,null,"412a8cc4",null));ge.options.__file="StudentsMana.vue";var ve=ge.exports,ye=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Row",[a("Col",{attrs:{span:"24"}},[a("sub-title",{attrs:{title:"学校设置"}})],1)],1),a("Alert",{attrs:{type:"warning"}},[e._v("请在左侧点选相应的节点，选择修改或新增(新增院系就选择学校，新增年级就选择相应的院系,请确保每个结构都有班级)")]),a("Row",[a("Col",{staticClass:"set-box",attrs:{span:"10"}},[a("h4",[e._v("当前设置")]),a("div",{staticClass:"form"},[a("Tree",{ref:"tree",attrs:{data:e.treeData},on:{"on-select-change":e.selectChange}})],1)]),a("Col",{staticClass:"set-box",attrs:{span:"14"}},[a("h4",[e._v("更新设置")]),a("div",{staticClass:"form"},[a("Row",{attrs:{type:"flex",align:"middle",justify:"center"}},[a("Col",{attrs:{span:"24"}}),"school"===e.selectNodeType?a("Col",{staticClass:"add-item",attrs:{span:"24"}},[a("Input",{staticStyle:{width:"100px"},attrs:{placeholder:"新增院系",clearable:""},model:{value:e.newAcademy,callback:function(t){e.newAcademy=t},expression:"newAcademy"}}),a("Button",{staticClass:"add-btn",attrs:{type:"info"},on:{click:e.addNewAcademy}},[e._v("新增院系")])],1):e._e(),"academy"===e.selectNodeType?a("Col",{staticClass:"add-item",attrs:{span:"24"}},[a("Input",{staticStyle:{width:"100px"},attrs:{placeholder:"新增年级",clearable:""},model:{value:e.newGrade,callback:function(t){e.newGrade=t},expression:"newGrade"}}),a("Button",{staticClass:"add-btn",attrs:{type:"info"},on:{click:e.addNewGrade}},[e._v("新增年级")])],1):e._e(),"grade"===e.selectNodeType?a("Col",{staticClass:"add-item",attrs:{span:"24"}},[a("Input",{staticStyle:{width:"100px"},attrs:{placeholder:"新增班级",clearable:""},model:{value:e.newClass,callback:function(t){e.newClass=t},expression:"newClass"}}),a("Button",{staticClass:"add-btn",attrs:{type:"info"},on:{click:e.addNewClass}},[e._v("新增班级")])],1):e._e(),"school"!==e.selectNodeType&&"none"!==e.selectNodeType?a("Col",{staticClass:"add-item",attrs:{span:"24"}},[a("Button",{attrs:{type:"warning"},on:{click:e.modifySelected}},[e._v("修改选中项")]),a("Button",{attrs:{type:"error"},on:{click:e.deleteSelected}},[e._v("删除选中项")])],1):e._e()],1)],1)])],1),a("Row",[a("Col",{attrs:{push:18,span:"6"}},[a("Button",{staticStyle:{"margin-left":"15px"},attrs:{type:"warning"},on:{click:e.refreshDept}},[e._v("刷新结构")])],1)],1)],1)},be=[],Ie={data:function(){return{selectNodeType:"none",selectNode:null,newAcademy:"",newGrade:"",newClass:"",treeData:[]}},beforeMount:function(){this.getDeptTree()},components:{SubTitle:O},methods:{refreshDept:function(){this.selectNodeType="none",this.selectNode=null,this.getDeptTree()},selectChange:function(){var e=this.$refs["tree"].getSelectedNodes();console.log(e),e.length>0?(this.selectNode=e[0],this.selectNodeType=e[0].nodeType):(this.selectNodeType="none",this.selectNode=null)},addNewAcademy:function(){var e=Object(ue["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.newAcademy,!(t.length<1)){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,this.addNewDept(t,1,-1);case 5:if(!e.sent){e.next=8;break}this.refreshDept(),this.newAcademy="";case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),addNewGrade:function(){var e=Object(ue["a"])(regeneratorRuntime.mark(function e(){var t,a,n,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.newGrade,!(t.length<1)){e.next=3;break}return e.abrupt("return");case 3:if(a=this.$refs["tree"].getSelectedNodes(),!(a.length>0&&a.length<2)){e.next=12;break}return n=a[0],s=n.deptId,e.next=9,this.addNewDept(t,3,s);case 9:if(!e.sent){e.next=12;break}this.refreshDept(),this.newGrade="";case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),addNewClass:function(){var e=Object(ue["a"])(regeneratorRuntime.mark(function e(){var t,a,n,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.newClass,!(t.length<1)){e.next=3;break}return e.abrupt("return");case 3:if(a=this.$refs["tree"].getSelectedNodes(),!(a.length>0&&a.length<2)){e.next=12;break}return n=a[0],s=n.deptId,e.next=9,this.addNewDept(t,5,s);case 9:if(!e.sent){e.next=12;break}this.refreshDept(),this.newClass="";case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),getSelectItems:function(){var e=this.$refs.tree.getCheckedNodes();return console.log("select",e),e},deleteSelected:function(){var e=this,t=this.$refs["tree"].getSelectedNodes();if(console.log(t),t.length>0&&t.length<2){var a=t[0];5===a.deptType?a.studentNum&&0!==a.studentNum?this.$Message.error({content:"该班级下还有学生"}):this.$Modal.confirm({title:"删除确认",content:"是否确认删除".concat(a.deptName),onOk:function(){e.deleteDept(a.deptId)}}):a.children&&0!==a.children.length?this.$Message.error({content:"该部门下还有分支"}):(console.log("可以删除"),this.$Modal.confirm({title:"删除确认",content:"是否确认删除".concat(a.deptName),onOk:function(){e.deleteDept(a.deptId)}}))}else this.$Message.error("请选中一项操作")},modifySelected:function(){var e=this;console.log("修改选中"),this.modifyValue=this.selectNode.deptName,this.$Modal.confirm({render:function(t){return t("Input",{props:{value:e.modifyValue,autofocus:!0,placeholder:"输入想要修改的名称"},on:{input:function(t){e.modifyValue=t}}})},onCancel:function(){console.log("点了取消"),e.modifyValue=""},onOk:function(){var t=Object(ue["a"])(regeneratorRuntime.mark(function t(){var a,n,s,r,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(console.log("点了确定"),!(e.modifyValue.length>0)){t.next=16;break}return a=e.selectNode,n=a.deptId,s=a.deptType,r=a.parentId,o=e.modifyValue,t.next=6,e.modifyDept(n,o,s,r);case 6:if(!t.sent){t.next=13;break}e.selectNode.title=o,e.selectNode.deptName=o,e.modifyValue="",e.$Message.success("修改成功"),t.next=14;break;case 13:e.$Message.info("修改失败");case 14:t.next=17;break;case 16:e.$Message.info("请检查输入");case 17:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()})},addNewDept:function(e,t,a){var n=this;return new Promise(function(s,r){n.$http.post("/admin/dept/saveDept",{parentId:a,deptName:e,deptType:t,deptDetail:""}).then(function(e){console.log(e.data),200==e.data.status?(n.$Message.success("新增成功"),s(!0)):r(!1)})})},modifyDept:function(e,t,a,n){var s=this;return new Promise(function(r,o){s.$http.post("/admin/dept/updateDept",{deptId:e,parentId:n,deptName:t,deptType:a,deptDetail:""}).then(function(e){console.log(e.data),200==e.data.status?r(!0):o(!1)})})},deleteDept:function(e){var t=this;return new Promise(function(a,n){t.$http.post("/admin/dept/deleteDept?deptId=".concat(e)).then(function(e){console.log(e.data),200==e.data.status?(t.refreshDept(),a(!0)):n(!1)})})},formatTreeData:function(e){this.treeData=[];var t={title:"学校",expand:!0,nodeType:"school",children:e};this.treeData.push(t)},dealTreeData:function(e){return e.filter(function(e){return!e.disableCheckbox})},getDeptTree:function(){var e=this;this.$http.get("/admin/dept/getDeptNodeTree").then(function(t){if(console.log("dept info",t.data),200==t.data.status){var a=t.data.data;console.log("dept tree",a);var n=we(a),s=ke(n);e.formatTreeData(s)}else e.$Message.error({content:"网络错误"})})}}};function we(e){var t=e.slice(0),a=t.findIndex(function(e){return 0===e.deptType}),n=t[a];return t.splice(a,1),t.push(n),t}function ke(e){var t=e.slice(0);return t.forEach(function(e){switch(e.title=e.deptName,e.deptId=e.deptId,e.deptType){case 1:e.nodeType="academy";break;case 3:e.nodeType="grade";break;case 5:e.nodeType="class",e.title="".concat(e.deptName," =>人员").concat(e.studentNum?e.studentNum:0,"名");break;default:e.nodeType="none";break}e.children?ke(e.children):delete e.children}),t}var Ce=Ie,Te=(a("b56c"),Object(o["a"])(Ce,ye,be,!1,null,"5f68dd0c",null));Te.options.__file="RegisterSetting.vue";var _e=Te.exports,xe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"helping-box"},[a("sub-title",{attrs:{title:"使用帮助"}}),a("Collapse",{model:{value:e.value1,callback:function(t){e.value1=t},expression:"value1"}},[a("Panel",{attrs:{name:"1"}},[e._v("\n           1.学生注册\n           "),a("p",{attrs:{slot:"content"},slot:"content"},[e._v("\n             请允许学生注册前，在"),a("b",[e._v("系统设置")]),e._v("里进行"),a("b",{staticClass:"link"},[a("router-link",{attrs:{to:"/index/regsetting"}},[e._v("学校设置")])],1),e._v("，设置学院，年级，班级等信息以供学生正确选择。\n           ")])]),a("Panel",{attrs:{name:"2"}},[e._v("\n           2.试卷管理\n           "),a("p",{attrs:{slot:"content"},slot:"content"},[e._v("\n             添加上传excel格式的习题，请按规定格式排布题目和答案，并在"),a("b",{staticClass:"link"},[a("router-link",{attrs:{to:"/index/quescate"}},[e._v("分类设置")])],1),e._v("里新建题目的分类，再添加相应的习题。\n           ")])]),a("Panel",{attrs:{name:"3"}},[e._v("\n           3.考试设置\n           "),a("p",{attrs:{slot:"content"},slot:"content"},[e._v("\n             安排正规考试之前，请务必先对考试的习题及时间进行设置"),a("b",{staticClass:"link"},[a("router-link",{attrs:{to:"/index/examsetting"}},[e._v("考试设置")])],1),e._v("，再选定考试的人员范围后，点击安排考试。\n           ")])])],1)],1)},Me=[],Se={data:function(){return{value1:"1"}},components:{SubTitle:O},methods:{}},Re=Se,Ne=(a("3b44"),Object(o["a"])(Re,xe,Me,!1,null,"17b99370",null));Ne.options.__file="Helping.vue";var De=Ne.exports,$e=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("sub-title",{attrs:{title:"管理员用户"}}),a("div",{staticClass:"table-box"},[a("Row",[a("Col",{staticClass:"btn-box",attrs:{span:"24"}},[a("ButtonGroup",[a("Button",{attrs:{type:"primary"},on:{click:e.addNewUser}},[e._v("新增用户")])],1)],1)],1),a("Table",{attrs:{size:"small",border:"",columns:e.columnsData,data:e.tableData},on:{"on-row-dblclick":e.clickRow}}),a("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:e.tableTotal,"page-size":30,current:e.currentPage},on:{"on-change":e.changePage}})],1)])],1),a("Modal",{attrs:{width:"500"},on:{"":function(e){}},model:{value:e.detailModal,callback:function(t){e.detailModal=t},expression:"detailModal"}},[a("p",{attrs:{slot:"header"},slot:"header"},[a("span",[e._v("账户详情")])]),a("div",[a("Row",[a("Col",{staticClass:"input-item",attrs:{span:"24"}},[a("p",{staticClass:"input-item-title"},[e._v("账户名：")]),a("Input",{staticStyle:{width:"300px"},attrs:{disabled:"",placeholder:"账户名"},model:{value:e.clickRecentUser.userName,callback:function(t){e.$set(e.clickRecentUser,"userName",t)},expression:"clickRecentUser.userName"}})],1)],1),a("Row",[a("Col",{staticClass:"input-item",attrs:{span:"24"}},[a("p",{staticClass:"input-item-title"},[e._v("姓名：")]),a("Input",{staticStyle:{width:"300px"},attrs:{disabled:e.inputDis,placeholder:"姓名"},model:{value:e.clickRecentUser.realName,callback:function(t){e.$set(e.clickRecentUser,"realName",t)},expression:"clickRecentUser.realName"}})],1)],1),a("Row",[a("Col",{staticClass:"input-item",attrs:{span:"24"}},[a("p",{staticClass:"input-item-title"},[e._v("院系/年级/班级：")]),a("Cascader",{staticStyle:{width:"300px"},attrs:{disabled:e.inputDis,data:e.cascaderData},model:{value:e.clickRecentUser.deptArr,callback:function(t){e.$set(e.clickRecentUser,"deptArr",t)},expression:"clickRecentUser.deptArr"}})],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"info"},on:{click:e.correctPwd}},[e._v("修改账户密码")]),a("Button",{attrs:{type:"error",loading:e.delete_loading},on:{click:e.deleteRecent}},[e._v("删除")]),a("Button",{attrs:{type:e.crtBtnType,loading:e.correct_loading},on:{click:e.correctRecent}},[e._v(e._s(e.crtBtnTitle))])],1)]),a("Modal",{attrs:{width:"500"},on:{"":function(e){}},model:{value:e.addNewModal,callback:function(t){e.addNewModal=t},expression:"addNewModal"}},[a("p",{attrs:{slot:"header"},slot:"header"},[a("span",[e._v("新增账户")])]),a("div",[a("Alert",{attrs:{closable:""}},[e._v("账户名为登陆时填写的用户名，请使用英文字符加数字")]),a("Row",[a("Col",{staticClass:"input-item",attrs:{span:"24"}},[a("p",{staticClass:"input-item-title"},[e._v("账户名：")]),a("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"账户名"},model:{value:e.newUserInfo.userName,callback:function(t){e.$set(e.newUserInfo,"userName",t)},expression:"newUserInfo.userName"}})],1)],1),a("Row",[a("Col",{staticClass:"input-item",attrs:{span:"24"}},[a("p",{staticClass:"input-item-title"},[e._v("姓名：")]),a("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"姓名"},model:{value:e.newUserInfo.realName,callback:function(t){e.$set(e.newUserInfo,"realName",t)},expression:"newUserInfo.realName"}})],1)],1),a("Row",[a("Col",{staticClass:"input-item",attrs:{span:"24"}},[a("p",{staticClass:"input-item-title"},[e._v("院系/年级/班级：")]),a("Cascader",{staticStyle:{width:"300px"},attrs:{data:e.cascaderData},model:{value:e.newUserInfo.deptArr,callback:function(t){e.$set(e.newUserInfo,"deptArr",t)},expression:"newUserInfo.deptArr"}})],1)],1),a("Row",[a("Col",{staticClass:"input-item",attrs:{span:"24"}},[a("p",{staticClass:"input-item-title"},[e._v("密码：")]),a("Input",{staticStyle:{width:"300px"},attrs:{type:"password",placeholder:"密码"},model:{value:e.newUserInfo.password,callback:function(t){e.$set(e.newUserInfo,"password",t)},expression:"newUserInfo.password"}})],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"error",loading:e.delete_loading},on:{click:e.clearAddNew}},[e._v("清空")]),a("Button",{attrs:{type:"success",loading:e.correct_loading},on:{click:e.confirmAddNew}},[e._v("确认")])],1)])],1)},Ae=[],Pe={data:function(){return{tableTotal:0,currentPage:1,newPassword:"",inputDis:!0,correct_loading:!1,delete_loading:!1,crtBtnType:"warning",crtBtnTitle:"修改",clickRecentUser:{userName:"账户名",realName:"姓名",userId:0,deptArr:[]},newUserInfo:{userName:"",realName:"",deptArr:[],password:"",dbpassword:""},cascaderData:[],detailModal:!1,addNewModal:!1,columnsData:[{title:"帐户名",key:"username"},{title:"姓名",key:"realname"},{title:"院系",key:"academy"},{title:"年级",key:"grade"},{title:"班级",key:"class"}],tableData:[]}},beforeMount:function(){var e=Object(ue["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getDeptInfo();case 2:if(!e.sent){e.next=4;break}this.getAdminUser(1);case 4:this.getDeptTree();case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),components:{SubTitle:O},methods:{changePage:function(e){this.getAdminUser(e)},getDeptTree:function(){var e=this;this.$http.get("/admin/dept/getDeptNodeTree").then(function(t){if(console.log("dept info",t.data),200==t.data.status){var a=t.data.data;console.log("dept tree",a),e.cascaderData=Be(a)}else e.$Message.error({content:"网络错误"})})},getDeptInfo:function(){var e=this;return new Promise(function(t,a){e.deptMap=Object.create(null),e.$http.get("/admin/dept/getAllDept").then(function(n){if(console.log("dept info",n.data),200==n.data.status){var s=n.data.data;s.forEach(function(t){e.deptMap[t.deptId]=t.deptName}),t(!0)}else e.$Message.error({content:"网络错误"}),a(!1)})})},clickRow:function(e){this.resetCrtBtn(),this.clickRecentUser.userName=e.username,this.clickRecentUser.realName=e.realname,this.clickRecentUser.userId=e.userId,this.clickRecentUser.deptArr=[e.academyId,e.gradeId,e.classId],console.log(this.clickRecentUser.deptArr),this.detailModal=!0},refreshTable:function(){this.getAdminUser(1)},getAdminUser:function(e){var t=this;this.$http.get("/admin/manage/getAllTeachers?page=".concat(e,"&row=30")).then(function(e){console.log("/admin/manage/getAllTeachers",e.data),200==e.data.status&&(t.tableTotal=e.data.data.count,t.formatTableData(e.data.data.userList))})},formatTableData:function(e){var t=this;this.tableData=[],e.forEach(function(e){var a={};a.username=e.userName,a.realname=e.realName,a.academy=t.deptMap[e.academyId],a.grade=t.deptMap[e.gradeId],a.class=t.deptMap[e.classId],a.academyId=e.academyId,a.gradeId=e.gradeId,a.classId=e.classId,a.userId=e.userId,a.reg="统一导入",t.tableData.push(a)})},addNewUser:function(){this.newUserInfo.userName="",this.newUserInfo.realName="",this.newUserInfo.deptArr=[],this.newUserInfo.password="",this.newUserInfo.dbpassword="",this.addNewModal=!0},clearAddNew:function(){this.newUserInfo={userName:"",realName:"",deptArr:[],password:"",dbpassword:""}},confirmAddNew:function(){var e=this,t=/^[a-zA-Z][a-zA-Z0-9_]*$/gi,a=this.newUserInfo,n=a.userName,s=a.realName,r=a.password;if(n.length>1&&n.length<20)if(t.test(n))if(s.length>1&&s.length<20)if(console.log("姓名格式正确"),r.length>5&&r.length<20){var o,i,l;console.log("密码格式正确");var c=this.newUserInfo.deptArr;1===c.length&&"未分组"==this.deptMap[c[0]]&&(o=c[0],i=c[0],l=c[0]),3===c.length?(o=c[0],i=c[1],l=c[2],this.$http.post("/admin/manage/saveUser",{userName:n,realName:s,userType:3,classId:l,password:r,gradeId:i,academyId:o,sex:0}).then(function(t){console.log("/admin/manage/saveUser",t.data),200==t.data.status?(e.$Message.success("新建成功"),e.addNewModal=!1,e.refreshTable()):e.$Message.error("新建失败")})):this.$Message.error("请选择院系年级")}else this.$Message.error("密码至少6位");else this.$Message.error("姓名格式有误");else this.$Message.error("账户名格式有误");else this.$Message.error("账户名格式有误")},correctPwd:function(){var e=this;console.log("修改密码"),this.$Modal.confirm({render:function(t){return t("Input",{props:{value:e.newPassword,autofocus:!0,placeholder:"输入新密码"},on:{input:function(t){e.newPassword=t}}})},onCancel:function(){console.log("点了取消"),e.newPassword=""},onOk:function(){var t=Object(ue["a"])(regeneratorRuntime.mark(function t(){var a,n,s,r,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:console.log("点了确定"),e.newPassword.length>0?(console.log("提交密码"),a=e.clickRecentUser,n=a.userName,s=a.realName,r=a.userId,o=a.deptArr,e.$http.post("/admin/manage/updateTeacher",{userId:r,userType:3,userName:n,realName:s,password:e.newPassword,academyId:o[0],gradeId:o[1],classId:o[2]}).then(function(t){console.log("update user info ",t.data),200==t.data.status?e.$Message.success({content:"密码修改成功"}):e.$Message.error({contetn:"密码修改失败"})}),e.newPassword=""):e.$Message.error("请检查输入");case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()})},resetCrtBtn:function(){this.inputDis=!0,this.crtBtnType="warning",this.crtBtnTitle="修改"},deleteRecent:function(){var e=this;console.log("删除当前账户"),this.$Modal.confirm({title:"删除确认",content:"请确认是否删除<b>".concat(this.clickRecentUser.userName,"？</b>"),onOk:function(){var t=e.clickRecentUser.userId,a=[];a.push(t),e.$http.post("/admin/manage/deleteUsers",{userIdJson:JSON.stringify(a)}).then(function(t){200==t.data.status?(e.$Message.success("删除成功"),e.refreshTable(),e.detailModal=!1):e.$Message.error("删除失败")})}})},correctRecent:function(){var e=this;if(this.inputDis)console.log("可以修改"),this.inputDis=!1,this.crtBtnType="success",this.crtBtnTitle="确定";else{console.log("确认修改");var t=this.clickRecentUser,a=t.userName,n=t.realName,s=t.userId,r=t.deptArr;this.$http.post("/admin/manage/updateTeacher",{userId:s,userType:3,userName:a,realName:n,password:"123456",academyId:r[0],gradeId:r[1],classId:r[2]}).then(function(t){console.log("update user info ",t.data),200==t.data.status?(e.$Message.success({content:"修改成功"}),e.refreshTable(),e.detailModal=!1):e.$Message.error({contetn:"修改失败"})})}}}};function Be(e){var t=e.slice(0);return e.forEach(function(e){e.label=e.deptName,e.value=e.deptId,e.children?Be(e.children):delete e.children}),t}var qe=Pe,Oe=(a("71d0"),Object(o["a"])(qe,$e,Ae,!1,null,"da721504",null));Oe.options.__file="AdminMana.vue";var Ue=Oe.exports,Le=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("sub-title",{attrs:{title:"当前考试"}}),a("div",{staticClass:"card-box"},[a("Row",e._l(e.exams,function(t){return a("Col",{key:t.examId,staticClass:"card-item",attrs:{span:"8"}},[a("Card",{attrs:{padding:12}},[a("div",{attrs:{slot:"title"},slot:"title"},[a("Badge",{attrs:{status:e.statusArr[t.status],text:e.textArr[t.status]}}),a("span",{staticClass:"card-title"},[e._v("\n            考试"+e._s(t.examId)+"\n          ")])],1),a("div",{attrs:{slot:"extra"},slot:"extra"},[2===t.status?a("Button",{attrs:{size:"small",type:"success"}},[e._v("总结")]):e._e(),0===t.status?a("Button",{attrs:{size:"small",type:"error"}},[e._v("取消")]):e._e()],1),a("div",[a("Row",[a("Col",{attrs:{span:"6"}},[e._v("\n            范围人数：\n            ")]),a("Col",{attrs:{span:"6"}},[e._v("\n            500\n            ")]),a("Col",{attrs:{span:"6"}},[e._v("\n            参加人数：\n            ")]),a("Col",{attrs:{span:"6"}},[e._v("\n            200\n            ")]),a("Col",{attrs:{span:"24"}},[e._v("\n            考试时间:2018-10-13 08:00\n            ")]),a("Col",{attrs:{span:"24"}},[e._v("\n            人员范围:数学系\n            ")])],1)],1)])],1)}))],1)],1)},Qe=[],Ee={data:function(){return{statusArr:["processing","warning","success"],textArr:["未开始","进行中","待总结"],exams:[{examId:100001,status:0,range:"三班",number:500,attend:0},{examId:100002,status:1,range:"五班",number:500,attend:200},{examId:100003,status:2,range:"四班",number:500,attend:496}]}},components:{SubTitle:O},methods:{}},je=Ee,Fe=(a("e401"),Object(o["a"])(je,Le,Qe,!1,null,"4713c52a",null));Fe.options.__file="RecentExam.vue";var Je=Fe.exports,Ge=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("sub-title",{attrs:{title:"考试历史"}})],1)},ze=[],We={data:function(){return{}},components:{SubTitle:O},methods:{}},He=We,Ve=(a("5c33"),Object(o["a"])(He,Ge,ze,!1,null,"528384e4",null));Ve.options.__file="ExamHistory.vue";var Ye=Ve.exports,Ze=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-box"},[a("sub-title",{attrs:{title:"成绩查询"}}),a("div",{staticClass:"table-box"},[a("Row",[a("Col",{staticClass:"btn-box",attrs:{span:"24"}},[a("ButtonGroup",[a("Button",{attrs:{type:"primary"},on:{click:e.openSearchModal}},[e._v("按条件查询")]),a("Button",{attrs:{type:"warning"},on:{click:e.cleanSearch}},[e._v("清除查询")])],1)],1)],1),a("Table",{attrs:{loading:e.tableLoading,size:"small",border:"",columns:e.columnsData,data:e.tableData},on:{"on-selection-change":e.tableSelectChange,"on-row-dblclick":e.clickRow}}),a("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:e.tableTotal,"page-size":30,current:e.currentPage},on:{"on-change":e.changePage}})],1)])],1),a("Modal",{model:{value:e.searchModal,callback:function(t){e.searchModal=t},expression:"searchModal"}},[a("p",{attrs:{slot:"header"},slot:"header"},[a("span",[e._v("按条件查询")])]),a("Tabs",{model:{value:e.searchInfo.recentTab,callback:function(t){e.$set(e.searchInfo,"recentTab",t)},expression:"searchInfo.recentTab"}},[a("TabPane",{attrs:{label:"按班级",name:"tab1"}},[a("Cascader",{staticStyle:{width:"200px"},attrs:{transfer:"",data:e.cascaderData},model:{value:e.searchInfo.classDeptArr,callback:function(t){e.$set(e.searchInfo,"classDeptArr",t)},expression:"searchInfo.classDeptArr"}})],1),a("TabPane",{attrs:{label:"按年级",name:"tab2"}},[a("Cascader",{staticStyle:{width:"200px"},attrs:{transfer:"",data:e.gradeCascader},model:{value:e.searchInfo.gradeDeptArr,callback:function(t){e.$set(e.searchInfo,"gradeDeptArr",t)},expression:"searchInfo.gradeDeptArr"}})],1),a("TabPane",{attrs:{label:"按院系",name:"tab3"}},[a("Cascader",{staticStyle:{width:"200px"},attrs:{transfer:"",data:e.academyCascader},model:{value:e.searchInfo.academyDeptArr,callback:function(t){e.$set(e.searchInfo,"academyDeptArr",t)},expression:"searchInfo.academyDeptArr"}})],1),a("TabPane",{attrs:{label:"关键字",name:"tab4"}},[e._v("\n        关键词："),a("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"搜索关键词"},model:{value:e.searchInfo.keyWord,callback:function(t){e.$set(e.searchInfo,"keyWord",t)},expression:"searchInfo.keyWord"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:e.confirmSearch}},[e._v("搜索")])],1)],1),a("Modal",{attrs:{width:"600"},model:{value:e.detailModal,callback:function(t){e.detailModal=t},expression:"detailModal"}},[a("p",{attrs:{slot:"header"},slot:"header"},[a("span",[e._v("成绩详情-"+e._s(e.detailName)+"-"+e._s(e.detailNum))])]),a("div",{staticClass:"detail-box"},[a("Row",{staticClass:"detail-title"},[a("Col",{attrs:{span:"6"}},[e._v("\n            考试时间\n          ")]),a("Col",{attrs:{span:"6"}},[e._v("\n            结果\n          ")]),a("Col",{attrs:{span:"6"}},[e._v("\n            分数\n          ")]),a("Col",{attrs:{span:"6"}},[e._v("\n            错题数量\n          ")])],1),e._l(e.detailArr,function(t){return a("Row",{key:t.reportId},[a("Col",{attrs:{span:"6"}},[e._v("\n            "+e._s(t.time)+"\n          ")]),a("Col",{attrs:{span:"6"}},[e._v("\n            "+e._s(t.result)+"\n          ")]),a("Col",{attrs:{span:"6"}},[e._v("\n            "+e._s(t.score)+"\n          ")]),a("Col",{attrs:{span:"6"}},[e._v("\n            "+e._s(t.errorCount)+"\n          ")])],1)})],2)])],1)},Xe=[],Ke={data:function(){return{detailName:"",detailNum:"",detailArr:[{reportId:1,time:"啊打发法",result:"过",score:12,errorCount:1}],searchModal:!1,tableLoading:!1,currentPage:1,tableTotal:0,detailModal:!1,cascaderData:[],gradeCascader:[],academyCascader:[],tableMode:"default",searchInfo:{confirmTab:"tab1",recentTab:"tab1",classDeptArr:[],gradeDeptArr:[],academyDeptArr:[],keyWord:""},columnsData:[{title:"学号",key:"stuId"},{title:"姓名",key:"name"},{title:"性别",width:80,key:"sexStr"},{title:"院系/年级/班级",key:"dept"},{title:"考试状态",key:"status"},{title:"考试次数",key:"count"},{title:"最高分",key:"max"}],tableData:[]}},beforeMount:function(){var e=Object(ue["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getDeptInfo();case 2:if(!e.sent){e.next=4;break}this.getDeptTree();case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),components:{SubTitle:O},methods:{cleanSearch:function(){this.tableData=[]},openSearchModal:function(){this.searchModal=!0},confirmSearch:function(){this.getSearchResult(1,this.searchInfo.recentTab)},getSearchResult:function(e,t){var a,n,s,r=this;switch(t){case"tab1":this.searchInfo.classDeptArr.length>0&&(a=5,n=this.searchInfo.classDeptArr[2]);break;case"tab2":this.searchInfo.gradeDeptArr.length>0&&(a=3,n=this.searchInfo.gradeDeptArr[1]);break;case"tab3":this.searchInfo.academyDeptArr.length>0&&(a=1,n=this.searchInfo.academyDeptArr[0]);break;case"tab4":s=this.searchInfo.keyWord;break;default:break}this.tableMode="search",this.tableLoading=!0,this.searchInfo.confirmTab=t,this.$http.post("/admin/examRule/getReport",{deptType:a,deptId:n,userType:5,keyWord:s,page:e,row:30}).then(function(e){if(200==e.data.status){r.tableLoading=!1;var t=e.data.data.resultList;r.tableTotal=e.data.data.count,console.log("resultArr",t),r.formatTableData(t),r.searchModal=!1}else r.$Message.error("查询错误")})},formatCascaderData:function(){this.cascaderData=[]},getDeptTree:function(){var e=this;this.$http.get("/admin/dept/getDeptNodeTree").then(function(t){if(console.log("dept info",t.data),200==t.data.status){var a=t.data.data;console.log("dept tree",a);var n=JSON.parse(JSON.stringify(a)),s=JSON.parse(JSON.stringify(a)),r=JSON.parse(JSON.stringify(a));n=et(n),s=et(s),r=et(r),e.cascaderData=tt(n,"normal"),e.gradeCascader=tt(s,"grade"),e.academyCascader=tt(r,"academy")}else e.$Message.error({content:"网络错误"})})},getDeptInfo:function(){var e=this;return new Promise(function(t,a){e.deptMap=Object.create(null),e.$http.get("/admin/dept/getAllDept").then(function(n){if(console.log("dept info",n.data),200==n.data.status){var s=n.data.data;s.forEach(function(t){e.deptMap[t.deptId]=t.deptName}),t(!0)}else e.$Message.error({content:"网络错误"}),a(!1)})})},formatTableData:function(e){var t=this;this.tableData=[],e.forEach(function(e){var a={};a.name=e.realName,a.sex=e.sex,a.sexStr=e.sex>0?"女":"男",a.userId=e.userId,a.stuId=e.userNum,a.academy=t.deptMap[e.academyId],a.grade=t.deptMap[e.gradeId],a.class=t.deptMap[e.classId],a.dept="".concat(t.deptMap[e.academyId],"/").concat(t.deptMap[e.gradeId],"/").concat(t.deptMap[e.classId]),a.academyId=e.academyId,a.gradeId=e.gradeId,a.classId=e.classId,a.status=e.resultState>0?"通过":"未通过",a.cellClassName={},a.cellClassName.status=e.resultState>0?"pass-cell":"nopass-cell",a.count=e.examCount,a.max=e.maxScore,a.reg="统一导入",t.tableData.push(a)})},changePage:function(e){this.currentPage=e,console.log("页面切换了",e,this.currentPage),"default"===this.tableMode?this.getAllStusPerPage(this.currentPage):"search"===this.tableMode&&this.getSearchResult(this.currentPage,this.searchInfo.confirmTab)},clickRow:function(e){var t=this;console.log(e);var a=e.userId;this.detailName=e.name,this.detailNum=e.stuId,this.$http.get("/admin/examRule/getReportByStudentId?userId=".concat(a)).then(function(e){if(console.log("/admin/ examRule / getReportByStudentId",e.data),200==e.data.status){var a=e.data.data;t.formatDetail(a),t.detailModal=!0}else t.$Message.error("网络错误")})},formatDetail:function(e){var t=this;this.detailArr=[],e.forEach(function(e){var a={};a.reportId=e.reportId,a.time=z(e.startTime),a.result=e.resultState>0?"通过":"未通过",a.score=e.userScore,a.errorCount=e.errorCount,t.detailArr.push(a)})},resetCrtBtn:function(){this.inputDis=!0,this.crtBtnType="warning",this.crtBtnTitle="修改"},refreshRecentTable:function(){"default"===this.tableMode?this.getAllStusPerPage(this.currentPage):"search"===this.tableMode&&this.getSearchResult(this.currentPage,this.searchInfo.confirmTab)},tableSelectChange:function(e){console.log("selection",e),this.selectionArr=e}}};function et(e){var t=e.slice(0),a=t.findIndex(function(e){return 0===e.deptType}),n=t[a];return t.splice(a,1),t.push(n),t}function tt(e,t){return e.forEach(function(e){switch(t){case"normal":break;case"grade":3==e.deptType&&delete e.children;break;case"academy":1==e.deptType&&delete e.children;break;default:break}e.label=e.deptName,e.value=e.deptId,e.children&&e.children.length>0?tt(e.children,t):delete e.children}),e}var at=Ke,nt=(a("ec06"),Object(o["a"])(at,Ze,Xe,!1,null,"c4adea36",null));nt.options.__file="ScoreSearch.vue";var st=nt.exports,rt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("sub-title",{attrs:{title:"布置考试"}}),a("div",{staticClass:"page-box"},[a("Row",[a("Col",{attrs:{span:"24"}},[a("Steps",{attrs:{current:e.step}},[a("Step",{attrs:{title:e.step>0?"完成":"待进行",content:"确认考试设置"}}),a("Step",{attrs:{title:e.step>1?"完成":"待进行",content:"选定考试人员"}}),a("Step",{attrs:{title:e.step>2?"完成":"待进行",content:"选定考试时间"}}),a("Step",{attrs:{title:e.step>3?"完成":"待进行",content:"确认配置"}})],1)],1)],1),a("Row",{staticStyle:{"padding-top":"20px"}},[a("Col",{attrs:{span:"24"}},[a("Carousel",{attrs:{arrow:"never",dots:"none"},model:{value:e.step,callback:function(t){e.step=t},expression:"step"}},[a("CarouselItem",[a("div",{staticClass:"card-box"},[a("Card",[a("div",{staticStyle:{"text-align":"left"}},[a("sub-title",{attrs:{title:"确认设置"}}),a("Row",[a("Col",{attrs:{span:"12"}},[e._v("\n                                   数学题 10 道  每题2分 分值20 "),a("br"),e._v("\n                                   化学题 10 道  每题3分 分值30 "),a("br"),e._v("\n                                   安全题 10 道  每题2分 分值20 "),a("br"),e._v("\n                                   历史题 10 道  每题3分 分值30 "),a("br"),e._v("\n                                   总分 100 分\n                                 ")]),a("Col",{attrs:{span:"12"}},[e._v("\n                                     考试时间   60分钟 "),a("br"),e._v("\n                                     通过分数   80分 "),a("br")])],1)],1)])],1)]),a("CarouselItem",[a("div",{staticClass:"card-box"},[a("Card",[a("div",{staticStyle:{"text-align":"left"}},[a("Row",[a("Col",{attrs:{span:"12"}},[a("Tree",{ref:"tree",attrs:{"show-checkbox":"",data:e.treeData},on:{"on-check-change":e.checkChange}})],1),a("Col",{attrs:{span:"12"}})],1)],1)])],1)]),a("CarouselItem",[a("div",{staticClass:"card-box"},[a("Card",[a("div",{staticStyle:{"text-align":"left"}},[a("sub-title",{attrs:{title:"选择时间"}}),a("Row",{staticStyle:{"min-height":"300px"}},[a("DatePicker",{staticStyle:{width:"200px"},attrs:{type:"date",placeholder:"选择日期"}}),a("TimePicker",{staticStyle:{width:"112px"},attrs:{format:"HH:mm",placeholder:"选择时分"}})],1)],1)])],1)]),a("CarouselItem",[a("div",{staticClass:"card-box"},[a("Card",[a("div",{staticStyle:{"text-align":"left"}})])],1)])],1)],1)],1),a("Row",{staticStyle:{"padding-top":"20px"}},[a("Col",{attrs:{span:"24"}},[a("ButtonGroup",[e.step>0?a("Button",{attrs:{type:"info"},on:{click:e.previous}},[e._v("上一步")]):e._e(),3===e.step?a("Button",{attrs:{type:"success"},on:{click:e.confirmAdd}},[e._v("确定")]):e._e(),e.step<3?a("Button",{attrs:{type:"info"},on:{click:e.next}},[e._v("下一步")]):e._e()],1)],1)],1)],1)],1)},ot=[],it={data:function(){return{step:0,treeData:[{title:"学校",nodeType:"school",children:[{title:"补考",nodeType:"bukao"},{title:"化学系",nodeType:"acadamy",children:[{title:"大一",nodeType:"grade",children:[{title:"一班(学生56人)",nodeType:"class"},{title:"一班(学生56人)",nodeType:"class"},{title:"一班(学生56人)",nodeType:"class"}]},{title:"大二",nodeType:"grade",children:[{title:"一班(学生56人)",nodeType:"class"},{title:"一班(学生56人)",nodeType:"class"},{title:"一班(学生56人)",nodeType:"class"}]}]},{title:"物理系",nodeType:"acadamy",children:[{title:"大一",nodeType:"grade",children:[{title:"一班(学生56人)",nodeType:"class"}]},{title:"大二",nodeType:"grade",children:[{title:"一班(学生56人)",nodeType:"class"},{title:"二班(学生56人)",nodeType:"class"}]}]}]}]}},components:{SubTitle:O},methods:{previous:function(){this.step>0&&this.step--},next:function(){this.step<3&&this.step++},confirmAdd:function(){console.log("检测并确认添加")},checkChange:function(){console.log("check change")}}},lt=it,ct=(a("e495"),Object(o["a"])(lt,rt,ot,!1,null,"ade4ed36",null));ct.options.__file="CreateExam.vue";var dt=ct.exports,ut=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("sub-title",{attrs:{title:"上传下载"}}),"1"===e.userType?a("Row",{staticClass:"block-box"},[a("Col",{attrs:{span:"12"}},[a("Upload",{ref:"upload1",attrs:{"before-upload":e.beforeQuesUp,"on-format-error":e.fileFormatError,name:"upfile",format:["xls","xlsx"],headers:e.headers,"with-credentials":!0,action:"http://localhost:8180/admin/question/importQuestionFromExcel"}},[a("Button",{attrs:{icon:"ios-cloud-upload-outline"}},[e._v("试题上传")])],1),a("div",{staticClass:"notice"},[a("p",[e._v("1.请确保上传的试题Excel文档的格式符合要求")]),a("p",[e._v("2.系统不对题目进行唯一性检测，重复题仍然会被当成新题目上传，请自行控制题库结构")]),a("p",[e._v("3.如有个别题目需要修改请前往试题管理功能进行修改")])])],1),a("Col",{attrs:{span:"12"}},[a("Upload",{ref:"upload2",attrs:{"before-upload":e.beforeStusUp,"on-format-error":e.fileFormatError,"with-credentials":!0,name:"upfile",format:["xls","xlsx"],headers:e.headers,action:"http://localhost:8180/admin/manage/importUserFromExcel"}},[a("Button",{attrs:{icon:"ios-cloud-upload-outline"}},[e._v("学生账号上传")])],1),a("div",{staticClass:"notice"},[a("p",[e._v("1.请确保上传的学生信息Excel文档的格式符合要求")]),a("p",[e._v("2.系统会根据学号进行唯一性检测，相同学号的账号会被忽略，不会覆盖")]),a("p",[e._v("3.如有个别学生信息需要修改请前往学生管理功能进行修改")])])],1)],1):e._e(),"1"===e.userType?a("Row",{staticClass:"block-box"},[a("Col",{attrs:{span:"24"}},[a("h3",{staticStyle:{margin:"8px"}},[e._v("试题分类下载")]),a("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择题目分类"},model:{value:e.selectCate,callback:function(t){e.selectCate=t},expression:"selectCate"}},e._l(e.tableCategoryList,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])})),a("Button",{staticStyle:{"margin-left":"8px"},on:{click:e.downloadQues}},[e._v("确认")]),e.questionPrepared?a("div",{staticClass:"down-url"},[a("a",{attrs:{download:"question.xls",href:e.questionUrl}},[e._v("点击下载试题")])]):e._e(),a("div",{staticClass:"notice"},[a("p",[e._v("1.支持按分类下载题库")]),a("p",[e._v("2.选择分类后点击确认，会跳出下载链接，点击下载即可")])])],1)],1):e._e(),a("Row",{staticClass:"block-box"},[a("Col",{attrs:{span:"24"}},[a("h3",{staticStyle:{margin:"8px"}},[e._v("下载学生及成绩信息")]),a("div",{staticClass:"notice"},[a("p",[e._v("1.点击相应的节点，选择需要下载的学生或者成绩信息")])]),a("Row",[a("Col",{staticClass:"set-box",attrs:{span:"12"}},[a("h3",[e._v("请选择一个节点")]),a("div",{staticClass:"form"},[a("Tree",{ref:"tree",attrs:{data:e.treeData},on:{"on-select-change":e.selectChange}})],1)]),a("Col",{attrs:{span:"12"}},[a("p",{staticStyle:{"font-size":"14px","margin-bottom":"10px"}},[e._v("你当前选择的是—"),a("b",[e._v(e._s(e.selectName))])]),a("div",{staticStyle:{"margin-bottom":"10px"}},[a("Button",{attrs:{type:"primary"},on:{click:e.downStuInfo}},[e._v("下载学生信息")]),e.studentPrepared?a("div",{staticClass:"down-url"},[a("a",{attrs:{download:"students.xls",href:e.studentUrl}},[e._v("点击下载学生信息")])]):e._e()],1),a("div",{staticStyle:{"margin-bottom":"10px"}},[a("Button",{attrs:{type:"primary"},on:{click:e.downScoreInfo}},[e._v("下载成绩信息")]),e.scorePrepared?a("div",{staticClass:"down-url"},[a("a",{attrs:{download:"scores.xls",href:e.scoreUrl}},[e._v("点击下载成绩信息")])]):e._e()],1)])],1)],1)],1)],1)},pt=[],ht={data:function(){return{selectName:"",selectNodeType:"none",selectNode:null,treeData:[],scorePrepared:!1,questionPrepared:!1,studentPrepared:!1,selectCate:null,tableCategoryList:[],scoreUrl:"",questionUrl:"",studentUrl:"",file:null,headers:{"Content-Type":"multipart/form-data"}}},components:{SubTitle:O},beforeMount:function(){this.getQuesType(),this.getDeptTree()},computed:{userType:function(){var e=window.sessionStorage.getItem("userType")||this.$store.getters.userType;return e}},methods:{getDeptTree:function(){var e=this;this.$http.get("/admin/dept/getDeptNodeTree").then(function(t){if(console.log("dept info",t.data),200==t.data.status){var a=t.data.data;console.log("dept tree",a);var n=ft(a),s=mt(n);e.formatTreeData(s)}else e.$Message.error({content:"网络错误"})})},formatTreeData:function(e){this.treeData=[];var t={title:"学校",expand:!0,nodeType:"school",deptName:"学校",children:e};this.treeData.push(t)},selectChange:function(){var e=this.$refs["tree"].getSelectedNodes();console.log(e),e.length>0?(this.selectNode=e[0],this.selectNodeType=e[0].nodeType,this.selectName=this.selectNode.deptName):(this.selectNodeType="none",this.selectNode=null)},formatTableCateList:function(e){var t=this;this.tableCategoryList=[],this.tableCategoryList.push({label:"全部",value:-1}),e.forEach(function(e){var a={};a.label="".concat(e.typeName,"-共").concat(e.count,"题"),a.value=e.typeId,t.tableCategoryList.push(a)})},getQuesType:function(){var e=this;this.$http.get("/admin/question/getQuestionType").then(function(t){if(console.log("获取题目分类",t.data),200==t.data.status){var a=t.data.data;e.formatTableCateList(a)}})},downloadQues:function(){var e=this;this.selectCate?(console.log("you select",this.selectCate),this.questionPrepared=!1,this.$http.get("/admin/question/exportQuestionToExcel?questionTypeId=".concat(this.selectCate),{responseType:"blob"}).then(function(t){if(200==t.status){var a=t.data,n=new Blob([a]);e.questionUrl=URL.createObjectURL(n),e.$Message.success("生成excel成功请点击下载"),e.questionPrepared=!0}})):this.$Message.error("请选择一个分类")},downScoreInfo:function(){var e,t,a=this;switch(console.log(this.selectNodeType),this.selectNodeType){case"none":return void this.$Message.error("请选择一个节点");case"school":return void this.$Message.error("不支持全校导出");case"academy":e=1,t=this.selectNode.deptId;break;case"grade":e=3,t=this.selectNode.deptId;break;case"class":e=5,t=this.selectNode.deptId;break;default:return void this.$Message.error("未知错误")}this.scorePrepared=!1,this.$http.post("/admin/examRule/exportReportToExcel",{deptType:e,deptId:t,userType:5},{responseType:"blob"}).then(function(e){if(200==e.status){var t=e.data,n=new Blob([t]);a.scoreUrl=URL.createObjectURL(n),a.scorePrepared=!0}})},downStuInfo:function(){var e,t,a=this;switch(console.log(this.selectNodeType),this.selectNodeType){case"none":return void this.$Message.error("请选择一个节点");case"school":return void this.$Message.error("不支持全校导出");case"academy":e=1,t=this.selectNode.deptId;break;case"grade":e=3,t=this.selectNode.deptId;break;case"class":e=5,t=this.selectNode.deptId;break;default:return void this.$Message.error("未知错误")}this.studentPrepared=!1,this.$http.post("/admin/manage/exportUserToExcel",{deptType:e,deptId:t,userType:5},{responseType:"blob"}).then(function(e){if(200==e.status){var t=e.data,n=new Blob([t]);a.studentUrl=URL.createObjectURL(n),a.studentPrepared=!0}})},fileFormatError:function(){this.$Message.error({content:"文件格式错误,仅接受Excel文件"})},beforeQuesUp:function(e){var t=this;this.file=e;var a=new FormData;a.append("upfile",this.file);var n={headers:{"Content-Type":"multipart/form-data"}};return this.$http.post("/admin/question/importQuestionFromExcel",a,n).then(function(e){if(console.log(e),200===e.status)if(200==e.data.status)t.$Message.success({content:"上传成功"});else{var a=e.data.msg;t.$Message.error({content:a})}}),!1},beforeStusUp:function(e){var t=this;this.file=e;var a=new FormData;a.append("upfile",this.file);var n={headers:{"Content-Type":"multipart/form-data"}};return this.$http.post("/admin/manage/importUserFromExcel",a,n).then(function(e){if(200===e.status)if(200==e.data.status)t.$Message.success({content:"上传成功"});else{var a=e.data.msg;t.$Message.error({content:a})}}),!1}}};function ft(e){var t=e.slice(0),a=t.findIndex(function(e){return 0===e.deptType});return t.splice(a,1),t}function mt(e){var t=e.slice(0);return t.forEach(function(e){switch(e.title=e.deptName,e.deptId=e.deptId,e.deptType){case 1:e.nodeType="academy";break;case 3:e.nodeType="grade";break;case 5:e.nodeType="class",e.title="".concat(e.deptName," =>人员").concat(e.studentNum?e.studentNum:0,"名");break;default:e.nodeType="none";break}e.children?mt(e.children):delete e.children}),t}var gt=ht,vt=(a("ce28"),Object(o["a"])(gt,ut,pt,!1,null,"1a9f7ac6",null));vt.options.__file="UpDownLoad.vue";var yt=vt.exports,bt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-box"},[a("sub-title",{attrs:{title:"个人中心"}}),a("div",{staticClass:"card-box"},[a("Card",[a("p",{attrs:{slot:"title"},slot:"title"},[e._v("个人信息")]),a("div",[a("Row",[a("Col",{attrs:{span:"4"}},[e._v("\n                    账户名：\n                    ")]),a("Col",{attrs:{span:"8"}},[e._v("\n                    "+e._s(e.userName)+"\n                    ")]),a("Col",{attrs:{span:"4"}},[e._v("\n                    姓名：\n                    ")]),a("Col",{attrs:{span:"8"}},[e._v("\n                    "+e._s(e.realName)+"\n                    ")])],1),a("Row",[a("Col",{attrs:{span:"4"}},[e._v("\n                    账户类型：\n                    ")]),a("Col",{attrs:{span:"8"}},[e._v("\n                    "+e._s(e.userType)+"\n                    ")]),a("Col",{attrs:{span:"4"}},[e._v("\n                    院系归属：\n                    ")]),a("Col",{attrs:{span:"8"}},[e._v("\n                    "+e._s(e.deptString)+"\n                    ")])],1)],1)])],1)],1)},It=[],wt={data:function(){return{userName:"",realName:"",userType:"",deptString:"",userInfo:{},deptMap:null}},beforeMount:function(){var e=this;this.getDeptInfo().then(function(t){t&&e.getRecentUser()})},components:{SubTitle:O},methods:{getDeptInfo:function(){var e=this;return new Promise(function(t,a){e.deptMap=Object.create(null),e.$http.get("/admin/dept/getAllDept").then(function(n){if(console.log("dept info",n.data),200==n.data.status){var s=n.data.data;s.forEach(function(t){e.deptMap[t.deptId]=t.deptName}),t(!0)}else e.$Message.error({content:"网络错误"}),a(!1)})})},getRecentUser:function(){var e=this;this.$http.get("/admin/getCurrentUser").then(function(t){if(console.log("===================================="),console.log("/admin/getCurrentUser",t.data),200==t.data.status){switch(e.userInfo=t.data.data,e.userName=e.userInfo.userName,e.realName=e.userInfo.realName,e.userInfo.userType){case"1":e.userType="管理员";break;case"3":e.userType="老师";break;case"5":e.userType="学生";break;default:e.userType="未知";break}-1==e.userInfo.academyId?e.deptString="无部门":e.deptString="".concat(e.deptMap[t.data.data.academyId],"/").concat(e.deptMap[t.data.data.gradeId],"/").concat(e.deptMap[t.data.data.classId])}console.log("====================================")})},modifyInfo:function(){},correctPassword:function(){}}},kt=wt,Ct=(a("cdec"),Object(o["a"])(kt,bt,It,!1,null,"f9775b2a",null));Ct.options.__file="UserCenter.vue";var Tt=Ct.exports,_t=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},xt=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"lost-img"},[n("img",{attrs:{src:a("b10f"),alt:""}})])}],Mt={data:function(){return{}},components:{},methods:{}},St=Mt,Rt=(a("dfb5"),Object(o["a"])(St,_t,xt,!1,null,"f8774ea6",null));Rt.options.__file="Lost.vue";var Nt=Rt.exports,Dt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("sub-title",{attrs:{title:"规章管理"}}),a("Alert",{staticStyle:{"text-align":"left"},attrs:{type:"warning",closable:""}},[e._v("双击对应条目修改或删除")]),a("div",{staticClass:"table-box"},[a("Row",[a("Col",{staticClass:"btn-box",attrs:{span:"24"}},[a("ButtonGroup",[a("Button",{attrs:{type:"primary"},on:{click:e.addNewRegu}},[e._v("新增规章")])],1)],1)],1),a("Table",{attrs:{size:"small",border:"",columns:e.columnsData,data:e.tableData},on:{"on-row-dblclick":e.clickRow}})],1),a("Modal",{attrs:{fullscreen:"",title:e.modalInfo.modalTitle},model:{value:e.fullModal,callback:function(t){e.fullModal=t},expression:"fullModal"}},[a("div",[a("Alert",{attrs:{type:"warning",closable:""}},[e._v("可以使用网页编辑器添加，但更加建议在word中排版完善后复制到编辑框，以取得更好的排版效果")]),a("Row",[a("Col",{staticClass:"modal-title",attrs:{span:"24"}},[a("Input",{attrs:{placeholder:"请输入规章标题"},model:{value:e.modalInfo.reguTitle,callback:function(t){e.$set(e.modalInfo,"reguTitle",t)},expression:"modalInfo.reguTitle"}})],1),a("Col",{staticClass:"modal-editor",attrs:{span:"24"}},[a("div",{ref:"editor",staticClass:"editor-box",staticStyle:{"text-align":"left"},attrs:{id:"editor"}})]),a("Col",{staticClass:"modal-preview",attrs:{span:"24"}},[a("div",{staticClass:"preview-title"},[e._v("\n                    "+e._s(e.modalInfo.previewTitle)+"\n                ")]),a("div",{domProps:{innerHTML:e._s(e.modalInfo.previewContent)}})])],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[e.modalInfo.type>0?a("Button",{attrs:{type:"primary"},on:{click:e.confirmModify}},[e._v("确认修改")]):e._e(),e.modalInfo.type<1?a("Button",{attrs:{type:"primary"},on:{click:e.confirmAdd}},[e._v("确认")]):e._e(),a("Button",{attrs:{type:"warning"},on:{click:e.preview}},[e._v("预览")])],1)]),a("Modal",{attrs:{title:e.detailInfo.title,width:"500"},model:{value:e.dbclickModal,callback:function(t){e.dbclickModal=t},expression:"dbclickModal"}},[a("div",{staticClass:"detail-modal"},[a("div",{staticClass:"detail-content",domProps:{innerHTML:e._s(e.detailInfo.content)}})]),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"warning"},on:{click:e.modifyRegu}},[e._v("修改")]),a("Button",{attrs:{type:"error"},on:{click:e.deleteRegu}},[e._v("删除")])],1)])],1)},$t=[],At=a("1a0b"),Pt=a.n(At),Bt={data:function(){return{dbclickModal:!1,columnsData:[{title:"序号",key:"index"},{title:"规章名称",key:"name"}],tableData:[],fullModal:!1,modalInfo:{modalTitle:"新增规章",type:0,regulationId:0,reguTitle:"",previewTitle:"",previewContent:""},detailInfo:{regulationId:0,title:"",content:""}}},beforeMount:function(){var e=Object(ue["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.getRegulations();case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),mounted:function(){var e=this,t=new Pt.a(this.$refs.editor);t.customConfig.onchange=function(t){e.editorContent=t},t.customConfig.zIndex=100,t.customConfig.menus=["head","bold","fontSize","fontName","italic","underline","strikeThrough","foreColor","backColor","list","justify","undo","redo"],t.create(),this.editor=t},components:{SubTitle:O},methods:{getRegulations:function(){var e=this;this.$http.get("/admin/regulation/findAllRegulationList").then(function(t){if(console.log("get regulations",t.data),200==t.data.status){var a=t.data.data;e.formatTableData(a)}})},getReguById:function(e,t){var a=this;this.$http.get("/admin/regulation/findRegulationById?regulationId=".concat(e)).then(function(e){console.log("get regulation by id",e.data),200==e.data.status?t(e.data.data):a.$Message.error("获取规章详情失败")})},addNewRegu:function(){console.log("新增规章"),this.editor.txt.clear(),this.modalInfo.modalTitle="新增规章",this.modalInfo.reguTitle="",this.modalInfo.previewContent="",this.modalInfo.previewTitle="",this.modalInfo.type=0,this.modalInfo.regulationId=0,this.fullModal=!0},clickRow:function(e){console.log("rowData",e);var t=e.regulationId;this.getReguById(t,function(e){this.detailInfo.title=e.regulationTitle,this.detailInfo.content=e.regulationText,this.detailInfo.regulationId=e.regulationId,this.dbclickModal=!0}.bind(this))},refreshTable:function(){this.getRegulations()},formatTableData:function(e){var t=this;this.tableData=[],e.forEach(function(e){var a={};a.index=e.regulationId,a.regulationId=e.regulationId,a.name=e.regulationTitle,t.tableData.push(a)})},preview:function(){var e=this.editor.txt.html();this.modalInfo.previewTitle=this.modalInfo.reguTitle,this.modalInfo.previewContent=e,console.log("html",e)},confirmAdd:function(){var e=this,t=this.editor.txt.html(),a=this.modalInfo.reguTitle;a.length>0&&t.length>0&&this.$http.post("/admin/regulation/saveRegulation",{regulationTitle:a,regulationText:t}).then(function(t){console.log("add new regulations",t.data),200==t.data.status&&(e.$Message.success("添加成功"),e.refreshTable(),e.fullModal=!1)})},modifyRegu:function(){this.modalInfo.type=1,this.modalInfo.regulationId=this.detailInfo.regulationId,this.modalInfo.reguTitle=this.detailInfo.title,this.modalInfo.previewContent="",this.modalInfo.previewTitle="",this.modalInfo.modalTitle="修改规章",this.editor.txt.html(this.detailInfo.content),this.fullModal=!0},deleteRegu:function(){var e=this.detailInfo.regulationId;this.$Modal.confirm({title:"确认删除？",onOk:function(){var t=this;console.log("删除确认"),this.$http.post("/admin/regulation/deleteRegulations",{regulationIdListJson:JSON.stringify([e])}).then(function(e){200==e.data.status&&(t.$Message.success("删除成功"),t.refreshTable(),t.dbclickModal=!1)})}.bind(this)})},confirmModify:function(){var e=this,t=this.editor.txt.html(),a=this.detailInfo.regulationId,n=this.modalInfo.reguTitle;n.length>0&&t.length>0&&this.$http.post("/admin/regulation/updateRegulation",{regulationId:a,regulationTitle:n,regulationText:t}).then(function(t){console.log("add new regulations",t.data),200==t.data.status&&(e.$Message.success("修改成功"),e.refreshTable(),e.fullModal=!1,e.dbclickModal=!1)})}}},qt=Bt,Ot=(a("1285"),Object(o["a"])(qt,Dt,$t,!1,null,"1b017ca0",null));Ot.options.__file="ReguMana.vue";var Ut=Ot.exports;n["default"].use(d["a"]);var Lt,Qt=new d["a"]({routes:[{path:"/login",name:"login",component:g},{path:"/index",component:R,children:[{path:"/index/",name:"overview",component:E,meta:{requireAuth:!0}},{path:"/index/examsetting",name:"examsetting",component:Y,meta:{requireAuth:!0}},{path:"/index/quesmana",name:"quesmana",component:ae,meta:{requireAuth:!0}},{path:"/index/stumana",name:"stumana",component:ve,meta:{requireAuth:!0}},{path:"/index/quescate",name:"quescate",component:le,meta:{requireAuth:!0}},{path:"/index/regsetting",name:"regsetting",component:_e,meta:{requireAuth:!0}},{path:"/index/helping",name:"helping",component:De,meta:{requireAuth:!0}},{path:"/index/admmana",name:"admmana",component:Ue,meta:{requireAuth:!0}},{path:"/index/examhistory",name:"examhistory",component:Ye,meta:{requireAuth:!0}},{path:"/index/recentexam",name:"recentexam",component:Je,meta:{requireAuth:!0}},{path:"/index/scoresearch",name:"scoresearch",component:st,meta:{requireAuth:!0}},{path:"/index/createexam",name:"createexam",component:dt,meta:{requireAuth:!0}},{path:"/index/updown",name:"updown",component:yt,meta:{requireAuth:!0}},{path:"/index/usercenter",name:"usercenter",component:Tt,meta:{requireAuth:!0}},{path:"/index/regumana",name:"regumana",component:Ut,meta:{requireAuth:!0}}]},{path:"/",redirect:"/login"},{path:"*",name:"404",component:Nt}]}),Et=a("a322"),jt=a("2f62"),Ft=a("c665"),Jt=a("aa9a"),Gt=function(){function e(){Object(Ft["a"])(this,e),this.ss=window.sessionStorage,this.ls=window.localStorage}return Object(Jt["a"])(e,[{key:"setSS",value:function(e,t){this.ss.setItem(e,t)}},{key:"getSS",value:function(e){return this.ss.getItem(e)}},{key:"setLS",value:function(e,t){this.ls.setItem(e,t)}},{key:"getLS",value:function(e){return this.ls.getItem(e)}},{key:"deleteSS",value:function(e){this.ss.removeItem(e)}},{key:"deleteLS",value:function(e){this.ls.removeItem(e)}},{key:"clearSS",value:function(){this.ss.clear()}},{key:"clearLS",value:function(){this.ls.clear()}},{key:"dealUserLogin",value:function(e){var t=e.name,a=e.level,n=e.id;this.setSS("name",t),this.setSS("level",a),this.setSS("id",n)}},{key:"dealUserLoginOut",value:function(){this.clearSS()}}]),e}(),zt=new Gt;n["default"].use(jt["a"]);var Wt={USER_LOGIN:"USER_LOGIN",USER_LOGINOUT:"USER_LOGINOUT"},Ht=new jt["a"].Store({state:{userInfo:{userName:"",userType:""},isLogined:!1},mutations:(Lt={},Object(Et["a"])(Lt,Wt.USER_LOGIN,function(e,t){e.userInfo.userName=t.userName,e.userInfo.userType=t.userType,e.isLogined=!0,zt.setSS("userName",t.userName),zt.setSS("userType",t.userType),zt.setSS("isLogined","1")}),Object(Et["a"])(Lt,Wt.USER_LOGINOUT,function(e){e.userInfo.userName="",e.userInfo.userType="",e.isLogined=!1,zt.clearSS()}),Lt),actions:{UserLogin:function(e,t){var a=e.commit;a(Wt.USER_LOGIN,t)},UserLoginOut:function(e){var t=e.commit;t(Wt.USER_LOGINOUT)}},getters:{doneTodosCount:function(e,t){return t.doneTodos.length},userType:function(e){return e.userInfo.userType}}}),Vt=a("e069"),Yt=a.n(Vt),Zt=a("bc3a"),Xt=a.n(Zt),Kt=a("a7fe"),ea=a.n(Kt);a("dcad");Xt.a.defaults.baseURL="http://118.25.96.162:8080",Xt.a.defaults.timeout=1e4,Xt.a.defaults.withCredentials=!0,Qt.beforeEach(function(e,t,a){if(e.meta.requireAuth){var n=window.sessionStorage.getItem("userName")||Ht.state.userInfo.userName;n?a():a({path:"/",query:{redirect:e.fullPath}})}else a()}),Xt.a.interceptors.response.use(function(e){return console.log("interceptors res"),200===e.status&&401==e.data.status&&(console.log("鉴权失败"),Qt.push("/login")),e},function(e){return Promise.reject(e)}),n["default"].use(ea.a,Xt.a),n["default"].use(Yt.a),n["default"].config.productionTip=!1,new n["default"]({router:Qt,store:Ht,storage:zt,render:function(e){return e(c)}}).$mount("#app")},"5c33":function(e,t,a){"use strict";var n=a("f626"),s=a.n(n);s.a},"71d0":function(e,t,a){"use strict";var n=a("8e5a"),s=a.n(n);s.a},"7ac8":function(e,t,a){},"7bd8":function(e,t,a){},"7c55":function(e,t,a){"use strict";var n=a("d3dd"),s=a.n(n);s.a},"7fae":function(e,t,a){"use strict";var n=a("0a5f"),s=a.n(n);s.a},"8e5a":function(e,t,a){},"8f41":function(e,t,a){"use strict";var n=a("7ac8"),s=a.n(n);s.a},9006:function(e,t,a){},"9e4e":function(e,t,a){},"9e56":function(e,t,a){},b10f:function(e,t,a){e.exports=a.p+"img/notfind.e9762abd.jpg"},b56c:function(e,t,a){"use strict";var n=a("f366"),s=a.n(n);s.a},be23:function(e,t,a){},c07d:function(e,t,a){"use strict";var n=a("330f"),s=a.n(n);s.a},c9af:function(e,t,a){},cdec:function(e,t,a){"use strict";var n=a("53e7"),s=a.n(n);s.a},ce28:function(e,t,a){"use strict";var n=a("0471"),s=a.n(n);s.a},d3dd:function(e,t,a){},dfb5:function(e,t,a){"use strict";var n=a("9006"),s=a.n(n);s.a},e1d6:function(e,t,a){"use strict";var n=a("be23"),s=a.n(n);s.a},e401:function(e,t,a){"use strict";var n=a("1a1e"),s=a.n(n);s.a},e495:function(e,t,a){"use strict";var n=a("f326"),s=a.n(n);s.a},e4ff:function(e,t,a){},ea63:function(e,t,a){"use strict";var n=a("c9af"),s=a.n(n);s.a},ec06:function(e,t,a){"use strict";var n=a("2d14"),s=a.n(n);s.a},ed9b:function(e,t,a){"use strict";var n=a("3041"),s=a.n(n);s.a},f326:function(e,t,a){},f366:function(e,t,a){},f626:function(e,t,a){},fc0e:function(e,t,a){"use strict";var n=a("9e56"),s=a.n(n);s.a},fcf7:function(e,t,a){"use strict";var n=a("e4ff"),s=a.n(n);s.a}});
//# sourceMappingURL=app.d849b187.js.map